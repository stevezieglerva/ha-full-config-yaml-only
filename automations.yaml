- id: '1720385058845'
  alias: Alexa announce
  description: ''
  trigger: []
  condition: []
  action:
  - service: script.notify_most_alexas
    metadata: {}
    data: {}
  mode: single
- id: '1720455959360'
  alias: Turn off Living Room TV when Owen away
  description: ''
  trigger: []
  condition: []
  action:
  - service: media_player.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: media_player.living_room_tv_2
  mode: single
- id: '1720475177733'
  alias: ios blueprint
  description: ''
  use_blueprint:
    path: Hypercookie/ios_notification_blueprint.yaml
    input:
      trigger_source: input_button.wifi_helper_button
      message_content: Ziegler Test
      message_sound_name: US-EN-Alexa-Garage-Door-Opened.wav
      message_static_media_url: http://www.cnn.com
      dummy: true
      target_for_notifications: mobile_app_iphone703
      action_1_action_enabled: true
      action_1_title: OK?
      action_1_action_activation_mode: foreground
      action_1_action_authentication_required: true
      message_attachment: Static
- id: '1720895026610'
  alias: "\U0001F9ED Extended Zone Notifications -15s"
  description: ''
  use_blueprint:
    path: panhans/zone_notification_extended.yaml
    input:
      persons:
      - person.katharine
      - person.owen
      - person.william
      notify_device: 3e6b468aa8cbb0c2286599eeac0fb952
      title_arriving: '{{ person }} arrived'
      message_arriving: '{{ person }} arrived at {{ zone }}.'
      title_leaving: '{{ person }} left'
      message_leaving: '{{ person }} left {{ zone }}.'
      notification_color:
      - 255
      - 98
      - 80
      duration:
        hours: 0
        minutes: 0
        seconds: 30
      zones_leaving:
      - zone.friendship
      - zone.tac
      - zone.wave_csc
      - zone.stmm
      - zone.lila_e_jones_pool
- id: '1721489891885'
  alias: ⁉️ Steve text
  description: ''
  trigger: []
  condition: []
  action:
  - service: notify.stevetext
    data:
      message: testing text
  mode: single
- id: '1721600371178'
  alias: Steve calendar notifications
  description: ''
  trigger:
  - platform: calendar
    event: start
    offset: 0:0:0
    entity_id: calendar.steve
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: 'Your school calendar for today: {% for event in agenda["calendar.steve"]["events"]
        %} {{ event.start}}: {{ event.summary }}<br> {% endfor %}'
  mode: single
- id: '1721738810826'
  alias: "\U0001F9ED Extended Zone Notifications - 3s"
  description: ''
  use_blueprint:
    path: panhans/zone_notification_extended.yaml
    input:
      persons:
      - person.katharine
      notify_device: 3e6b468aa8cbb0c2286599eeac0fb952
      title_arriving: '{{ person }} arrived'
      message_arriving: '{{ person }} arrived at {{ zone }}.'
      title_leaving: '{{ person }} left'
      message_leaving: '{{ person }} left {{ zone }}.'
      notification_color:
      - 255
      - 98
      - 80
      duration:
        hours: 0
        minutes: 0
        seconds: 3
      zones_leaving: []
      zones:
      - zone.kelly_rd_64
      - zone.kelly_rd_olive_chapel
- id: 2a05a68c-25a7-443e-b318-3e1a542e5a9f
  alias: "\U0001F3E1 Someone is home"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.stephen_ziegler
    - person.katharine
    - person.owen
    - person.william
    to: home
    for:
      hours: 0
      minutes: 0
      seconds: 15
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.anyone_home
- id: 26633201-fc71-4c5c-82ed-dde3c32657c1
  alias: "\U0001F699 No one home"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.stephen_ziegler
    - person.katharine
    - person.owen
    - person.william
    from: home
    for:
      hours: 0
      minutes: 0
      seconds: 15
  condition:
  - condition: template
    value_template: "{{ not is_state('person.stephen_ziegler', 'home') and\n  not
      is_state('person.katharine', 'home') and\n  not is_state('person.owen', 'home')
      and\n  not is_state('person.william', 'home') }}\n"
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.anyone_home
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F697 No one is home"
- id: c7c01ec2-088a-4882-8a50-cfcc2ccd813c
  alias: "\U0001F5D1 ➡️◼️Trash Reminder for Owen and William"
  description: Take trshbout to street
  trigger:
  - platform: time
    at: '20:00:00'
  condition:
  - condition: time
    weekday:
    - wed
    - tue
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ now().month % 2 == 1 }}'
      sequence:
      - service: notify.mobile_app_iphone703
        data:
          message: Owen, it's your turn to take out the trash.
      - service: notify.stevetext
        data:
          message: Owen, it's your turn to take out the trash.
    - conditions:
      - condition: template
        value_template: '{{ now().month % 2 == 0 }}'
      sequence:
      - service: notify.mobile_app_iphone703
        data:
          message: William, it's your turn to take out the trash.
      - service: notify.stevetext
        data:
          message: William, it's your turn to take out the trash.
- id: '1721860259692'
  alias: Test Text Belt2
  description: ''
  trigger: []
  condition: []
  action:
  - service: rest_command.textbelt
    metadata: {}
    data:
      payload: hello world
  mode: single
- id: 5868edc2-c19e-4ed2-ba1d-1f6e3786ac16
  alias: Send Text Message
  trigger:
  action:
  - service: script.send_text
    data:
      phone: '17038250630'
      message: Hello from Home Assistant!
- id: '1722108730175'
  alias: AWS Send text
  description: ''
  trigger:
  condition: []
  action:
  - service: script.aws_send_text
    data:
      phone: '17038250630'
      message: Hello from Home Assistant via AWS!
  mode: single
- id: '1722558241379'
  alias: "◼️➡️\U0001F5D1️Bring trsh cans in"
  description: Bring trsh cans in
  trigger:
  - platform: time
    at: '20:00:00'
  condition:
  - condition: time
    weekday:
    - thu
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ now().month % 2 == 1 }}'
      sequence:
      - service: notify.mobile_app_iphone703
        data:
          message: Owen, it's your turn to take out the trash.
      - service: notify.stevetext
        data:
          message: Owen, it's your turn to take out the trash.
    - conditions:
      - condition: template
        value_template: '{{ now().month % 2 == 0 }}'
      sequence:
      - service: notify.mobile_app_iphone703
        data:
          message: William, it's your turn to take out the trash.
      - service: notify.stevetext
        data:
          message: William, it's your turn to take out the trash.
  mode: single
- id: '1722688397709'
  alias: "\U0001F4C6 First of Month"
  description: ''
  trigger:
  - platform: time
    at: 00:00:00
  condition:
  - condition: template
    value_template: '{{ now().day == 1 }}'
  action: []
  mode: single
- id: 0ff1de95-c7d3-429a-9f06-2dc86ed5c083
  alias: "\U0001F4C6 Set Chore Assignments"
  description: ''
  trigger:
  - platform: time
    at: 00:10:00
  - platform: state
    entity_id: input_boolean.pretend_first_of_month
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.odd_month_sensor
        state: 'True'
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.trash_person
        data:
          option: Owen
      - service: input_select.select_option
        target:
          entity_id: input_select.trash_text
        data:
          option: notify.owentext
      - service: input_select.select_option
        target:
          entity_id: input_select.vacuum_person
        data:
          option: William
      - service: input_select.select_option
        target:
          entity_id: input_select.vacuum_text
        data:
          option: notify.williamtext
      - service: input_select.select_option
        target:
          entity_id: input_select.tp_person
        data:
          option: William
    - conditions:
      - condition: state
        entity_id: sensor.odd_month_sensor
        state: 'False'
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.trash_person
        data:
          option: William
      - service: input_select.select_option
        target:
          entity_id: input_select.trash_text
        data:
          option: notify.williamtext
      - service: input_select.select_option
        target:
          entity_id: input_select.vacuum_person
        data:
          option: Owen
      - service: input_select.select_option
        target:
          entity_id: input_select.vacuum_text
        data:
          option: notify.owentext
      - service: input_select.select_option
        target:
          entity_id: input_select.tp_person
        data:
          option: Owen
- id: '1722725548928'
  alias: ⏱ Cancel Trash Timer
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.trash_in_progress
    to: 'off'
  condition: []
  action:
  - service: timer.cancel
    metadata: {}
    data: {}
    target:
      entity_id: timer.trash_timer
  mode: single
- id: '1722725713849'
  alias: ⏱ Start Trash Tiimer
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.trash_in_progress
    to: 'on'
  condition: []
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.trash_timer
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "{% set input_value = states('input_select.trash_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Started to reminded {{input_value}}
        about the trash chore.\n Time: {{ timestamp }}\n"
  - service: script.send_yahoo_text
    data:
      notify_service: '{{ states(''input_select.trash_text'') }}'
      message: "{% set input_value = states('input_select.trash_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Please do your trash
        chore. Let me know when you're done.\n Time: {{ timestamp }}\n"
  mode: single
- id: ca8db715-5487-4902-a30d-e8debdfbcd62
  alias: "\U0001F5D1 Trash Reminder"
  trigger:
  - platform: time_pattern
    minutes: /30
  condition:
  - condition: state
    entity_id: timer.trash_timer
    state: active
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "{% set input_value = states('input_select.trash_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Reminded {{input_value}}
        about the trash chore.\n Time: {{ timestamp }}\n"
  - service: script.send_yahoo_text
    data:
      notify_service: '{{ states(''input_select.trash_text'') }}'
      message: "{% set input_value = states('input_select.trash_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Remember your trash chore.\n
        Time: {{ timestamp }}\n"
  - service: script.notify_most_alexas
    data:
      message: '{% set input_value = states(''input_select.trash_person'') %} {{input_value
        }}, you need to do the trash chore. {{ input_value }} you will receive a penalty
        if the timer runs out.

        '
- id: '1722725977671'
  alias: ⏱ Start Vacuum Timer
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.vacuum_in_progress
    to: 'on'
  condition: []
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.vacuum_timer
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "{% set input_value = states('input_select.vacuum_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Started to remind {{input_value}}
        about the vacuum chore.\n Time: {{ timestamp }}\n"
  - service: script.send_yahoo_text
    data:
      notify_service: '{{ states(''input_select.vacuum_text'') }}'
      message: "{% set input_value = states('input_select.vacuum_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Please do your vacuum
        chore. Let me know when you're done.\n Time: {{ timestamp }}\n"
  mode: single
- id: '1722726834872'
  alias: ⏱ Cancel Vacuum Timer
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.vacuum_in_progress
    to: 'off'
  condition: []
  action:
  - service: timer.cancel
    metadata: {}
    data: {}
    target:
      entity_id: timer.vacuum_timer
  mode: single
- id: 6119bd1f-3203-4757-b335-609e175a2ddc
  alias: "\U0001F9F9 Vacuum Reminder"
  trigger:
  - platform: time_pattern
    minutes: /33
  condition:
  - condition: state
    entity_id: timer.vacuum_timer
    state: active
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "{% set input_value = states('input_select.vacuum_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Reminded {{input_value}}
        about the vacuum chore.\n Time: {{ timestamp }}\n"
  - service: script.send_yahoo_text
    data:
      notify_service: '{{ states(''input_select.vacuum_text'') }}'
      message: "{% set input_value = states('input_select.vacuum_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Remember your vacuum
        chore.\n Time: {{ timestamp }}\n"
  - service: script.notify_most_alexas
    data:
      message: "\n\n\n{% set input_value = states('input_select.vacuum_person') %},
        you need to vacuum.  {% set input_value = states('input_select.vacuum_person')
        %}, you will receive a penaly if the timer runs out.\n \n"
- id: '1722774422397'
  alias: "\U0001F4C6 Start Saturday Chores"
  description: ''
  trigger:
  - platform: time
    at: '15:00:00'
  condition:
  - condition: time
    weekday:
    - sat
  action:
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.trash_in_progress
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.vacuum_in_progress
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.tp_in_progress
  mode: single
- id: acb31509-f769-4527-a645-2b4e99453e0d
  alias: ⏱ Start TP Timer
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.tp_in_progress
    to: 'on'
  condition: []
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.tp_timer
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "{% set input_value = states('input_select.vacuum_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Started to remind {{input_value}}
        about the TP chore.\n Time: {{ timestamp }}\n"
  - service: script.send_yahoo_text
    data:
      notify_service: '{{ states(''input_select.vacuum_text'') }}'
      message: "{% set input_value = states('input_select.vacuum_person') %}  {% set
        timestamp = now().strftime('%H:%M:%S') %} \U0001F9F9 Please do your TP chore.
        Let me know when you're done.\n Time: {{ timestamp }}\n"
  mode: single
- id: 80f22500-d2a8-4714-b7c2-97ef2aff10cd
  alias: ⏱ Cancel TP Timer
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.tp_in_progress
    to: 'off'
  condition: []
  action:
  - service: timer.cancel
    metadata: {}
    data: {}
    target:
      entity_id: timer.tp_timer
  mode: single
- id: '1722776310691'
  alias: "\U0001F9FB TP Reminder"
  description: ''
  trigger:
  - platform: time_pattern
    minutes: /25
  condition:
  - condition: state
    entity_id: timer.tp_timer
    state: active
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "{% set input_value = states('input_select.tp_person') %}  {% set timestamp
        = now().strftime('%H:%M:%S') %} \U0001F9F9 Reminded {{input_value}} about
        the TP chore.\n Time: {{ timestamp }}\n"
  - service: script.send_yahoo_text
    data:
      notify_service: '{{ states(''input_select.tp_text'') }}'
      message: "{% set input_value = states('input_select.tp_person') %}  {% set timestamp
        = now().strftime('%H:%M:%S') %} \U0001F9FB Remember your TP chore.\n Time:
        {{ timestamp }}\n"
  - service: script.notify_most_alexas
    data:
      message: "{% set input_value = states('input_select.tp_person') %} {{input_value
        }}, you need to do the toilet paper chore. {{ input_value }} you will receive
        a penalty if the timer runs out.\n \n"
  mode: single
- id: '1722778848218'
  alias: "\U0001F4C6 Start Wednesday Chores"
  description: ''
  trigger:
  - platform: time
    at: '20:00:00'
  condition:
  - condition: time
    weekday:
    - wed
  action:
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.trash_in_progress
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.tp_in_progress
  mode: single
- id: 6fe862cb-f53d-4f12-9e9b-8d7ab62207a6
  alias: "\U0001F4C6 Assign Table Setter"
  description: ''
  trigger:
  - platform: time
    at: 00:00:00
  action:
  - service: input_select.select_option
    data_template:
      entity_id: input_select.table_person
      option: "{% set messages = {\n  'sunday': 'Charlotte',\n  'monday': 'Charlotte',\n
        \ 'tuesday': 'Charlotte',\n  'wednesday': 'Owen',\n  'thursday': 'Owen',\n
        \ 'friday': 'William',\n  'saturday': 'William'\n} %} {% set day = now().strftime('%A').lower()
        %} {{ messages[day] }}\n"
- id: '1722784081474'
  alias: "\U0001F3E1 Just Arrived Home"
  description: ''
  trigger:
  - platform: zone
    entity_id: person.stephen_ziegler
    zone: zone.home
    event: enter
  condition: []
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.just_arrive_home
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F3E1⏲ Started the Just Arrived timer"
  mode: single
- id: '1723402475328'
  alias: Reset Just Arrived Home
  description: ''
  trigger:
  - platform: state
    entity_id:
    - timer.just_arrive_home
    from: active
    to: idle
  condition: []
  action:
  - service: input_boolean.turn_off
    data: {}
  mode: single
- id: toggle_grill_heating_timer
  alias: Toggle Grill Heating Timer
  trigger:
  - platform: state
    entity_id: input_boolean.grill_heating
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.grill_heating
        state: 'on'
      sequence:
      - service: timer.start
        target:
          entity_id: timer.grill_heating
    - conditions:
      - condition: state
        entity_id: input_boolean.grill_heating
        state: 'off'
      sequence:
      - service: timer.finish
        target:
          entity_id: timer.grill_heating
- id: toggle_waffle_fries_cooking_timer
  alias: Toggle Waffle Fries Cooking Timer
  trigger:
  - platform: state
    entity_id: input_boolean.waffle_fries_cooking
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        state: 'on'
        entity_id: input_boolean.waffle_fries_cooking
      sequence:
      - service: timer.start
        data: {}
        target:
          entity_id: timer.waffle_fries_cooking
    - conditions:
      - condition: state
        state: 'off'
        entity_id: input_boolean.waffle_fries_cooking
      sequence:
      - service: timer.finish
        target:
          entity_id: timer.waffle_fries_cooking
        data: {}
- id: toggle_meat_cooking_timer
  alias: Toggle Meat Cooking Timer
  trigger:
  - platform: state
    entity_id: input_boolean.meat_cooking
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.meat_cooking
        state: 'on'
      sequence:
      - service: timer.start
        target:
          entity_id: timer.meat_cooking
    - conditions:
      - condition: state
        entity_id: input_boolean.meat_cooking
        state: 'off'
      sequence:
      - service: timer.cancel
        target:
          entity_id: timer.meat_cooking
- id: '1723468241629'
  alias: "\U0001F35F Notify fries are done"
  description: ''
  trigger:
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.waffle_fries_cooking
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "{% set timestamp = now().strftime('%H:%M:%S') %} \U0001F35F Fries
        are done at {{ timestamp }}.\n"
      data:
        push:
          sound: alarm.caf
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.waffle_fries_cooking
  mode: single
- id: '1723560600156'
  alias: "\U0001F455\U0001F525 Dryer Finished"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.ft997237g_laundry_machine_state
    from: Run
    to: Finished
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F455\U0001F525 Dryer finished"
  mode: single
- id: 92ab5b64-458b-4be6-bb0f-62db64b3f978
  alias: Washer Machine State
  description: Send a notification when a specified entity changes state
  trigger:
  - platform: state
    entity_id:
    - sensor.ht338496n_laundry_machine_state
  action:
  - service: notify.mobile_app_iphone703
    data:
      message: The state of {{ trigger.entity_id }} has changed from {{ trigger.from_state.state
        }} to {{ trigger.to_state.state }}.
- id: '1723563434189'
  alias: Notify Washer Sub Cycle
  description: Send a notification when a specified entity changes state
  trigger:
  - platform: state
    entity_id:
    - sensor.ht338496n_laundry_sub_cycle
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    data:
      message: The state of {{ trigger.entity_id }} has changed from {{ trigger.from_state.state
        }} to {{ trigger.to_state.state }}.
  mode: single
- id: '1723563483370'
  alias: Notify Washer End of Cycle
  description: Send a notification when a specified entity changes state
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ht338496n_laundry_end_of_cycle
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    data:
      message: The state of {{ trigger.entity_id }} has changed from {{ trigger.from_state.state
        }} to {{ trigger.to_state.state }}.
  mode: single
- id: '1723563607805'
  alias: Notify Dryer Machine State
  description: Send a notification when a specified entity changes state
  trigger:
  - platform: state
    entity_id:
    - sensor.ft997237g_laundry_machine_state
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    data:
      message: The state of {{ trigger.entity_id }} has changed from {{ trigger.from_state.state
        }} to {{ trigger.to_state.state }}.
  mode: single
- id: '1723563638405'
  alias: Notify Dryer End of Cycle
  description: Send a notification when a specified entity changes state
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ft997237g_laundry_end_of_cycle
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    data:
      message: The state of {{ trigger.entity_id }} has changed from {{ trigger.from_state.state
        }} to {{ trigger.to_state.state }}.
  mode: single
- id: '1724973861946'
  alias: "\U0001F37D Dinner ready announcements"
  description: ''
  trigger: []
  condition: []
  action:
  - service: script.notify_most_alexas
    data:
      message: "{{ states('input_select.table_person')}} come set the table. {{ states('input_select.table_person')}}
        come set the table. \n      Dinner will be ready in about 15 minutes."
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - service: script.notify_most_alexas
    data:
      message: Dinner will be ready in about 5 minutes
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: script.notify_most_alexas
    metadata: {}
    data:
      message: Dinner is ready!
  mode: single
- id: '1725833944112'
  alias: "\U0001F37D Announce Dinner Table Setter"
  description: ''
  trigger:
  - platform: time
    at: '18:00:00'
  condition: []
  action:
  - service: script.notify_most_alexas
    data:
      message: 'The person to set the table is: {{ states(''input_select.table_person'')
        }}.   I repeat, the person to set the table is {{ states(''input_select.table_person'')
        }}.'
  mode: single
- id: '1725998281473'
  alias: 4PM TV Off
  description: ''
  trigger:
  - platform: time
    at: '16:00:00'
  condition:
  - condition: state
    entity_id: media_player.sony_xbr_55x850g
    state: 'on'
  - condition: state
    entity_id: sensor.william_has_school_tomorrow
    state: ''
  - condition: state
    entity_id: sensor.charlotte_has_school_tomorrow
    state: 'True'
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
  action:
  - service: media_player.media_pause
    target:
      entity_id: media_player.sony_xbr_55x850g
    data: {}
  - service: script.notify_most_alexas
    metadata: {}
    data:
      message: It's time to turn off the TV and do homework.
  mode: single
- id: '1727027731255'
  alias: "\U0001F525 Grill use and shutdown process"
  description: ''
  trigger: []
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    data:
      message: "\U0001F525 Grill started"
      data:
        push:
          sound: alarm.caf
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F525 Grill should be hot now"
      data:
        push:
          sound: alarm.caf
  - delay:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: 'Don''t forget to cover the grill '
      data:
        push:
          sound: alarm.caf
  mode: single
- id: '1729124978730'
  alias: Office lights and lamp on with motion
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 541858278f8e0f3bfab5b64b39701cbe
    entity_id: 35849acbafd284cc880dae68ccd797e5
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F6B6Home"
  action:
  - choose:
    - conditions:
      - condition: time
        after: 08:00:00
        before: '18:00:00'
        weekday:
        - mon
        - tue
        - wed
        - thu
        - fri
        - sat
        - sun
        alias: Working hours
      sequence:
      - service: script.set_office_lights
        metadata: {}
        data:
          style: bright
    - conditions:
      - condition: state
        entity_id: sensor.owen_has_school_today
        state: 'True'
      - condition: state
        entity_id: schedule.wake_up
        state: 'on'
      sequence:
      - service: script.set_office_lights
        metadata: {}
        data:
          style: dim
      alias: Wake up for Owen
    - conditions:
      - condition: numeric_state
        entity_id: sensor.office_motion_sensor_illuminance_lux
        below: 215
      - condition: state
        entity_id: schedule.wake_up
        state: 'off'
      - condition: state
        entity_id: sensor.late_night
        state: 'False'
      sequence:
      - service: script.set_office_lights
        metadata: {}
        data:
          style: bright
      alias: Evening
    - conditions:
      - condition: time
        after: '22:00:00'
      - condition: numeric_state
        entity_id: sensor.office_motion_sensor_illuminance_lux
        below: 215
      - condition: state
        entity_id: sensor.night
        state: 'True'
      sequence:
      - service: script.set_office_lights
        metadata: {}
        data:
          style: medium
      alias: Dimmer before bed
  mode: single
- id: '1729125593991'
  alias: Office light off when empty
  description: ''
  trigger:
  - type: not_occupied
    platform: device
    device_id: 541858278f8e0f3bfab5b64b39701cbe
    entity_id: 35849acbafd284cc880dae68ccd797e5
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F6B6Home"
  action:
  - service: script.set_office_lights
    metadata: {}
    data:
      style: 'off'
  - condition: state
    entity_id: sensor.night
    state: 'False'
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.apple_home_office_fan
  mode: single
- id: '1729290615685'
  alias: "\U0001F4A6\U0001F374Start Dishwasher Timer"
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: dbae7f7854a2ef97c27a83114cc9acd0
    type: action
    subtype: single
  condition: []
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.dishwasher
  - service: script.dishwasher_timer_notification
    data:
      notification_message: Dishwasher timer started
  mode: single
- id: '1729290757031'
  alias: "\U0001F4A6\U0001F374 Cancel dishwasher timer"
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: dbae7f7854a2ef97c27a83114cc9acd0
    type: action
    subtype: double
  condition: []
  action:
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.kitchen_working
  mode: single
- id: '1729293256416'
  alias: Garage motion detected
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 77b1c91800c080836f21f5086b6b1637
    entity_id: e9b79a0705db7c31f403d50ba412c0c0
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: 42b3221a9d1eb5af8681b7bc0e1f79fe
    entity_id: fa80046087de8b5e333b3d305814448c
    domain: binary_sensor
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: sensor.night
      state: 'True'
    - condition: numeric_state
      entity_id: sensor.garage_motion_backdoor_illuminance_lux
      below: 25
  action:
  - service: light.turn_on
    metadata: {}
    data: {}
    target:
      area_id: garage
  mode: single
- id: '1729429198042'
  alias: "\U0001F4A6\U0001F374Dishwasher Timer Finished"
  description: Send a notification when the dishwasher timer finishes
  trigger:
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.dishwasher
  condition: []
  action:
  - service: script.dishwasher_timer_notification
    data:
      notification_message: Dishwasher timer finished
  - condition: state
    entity_id: schedule.dishwasher_announcements
    state: 'on'
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_dishwasher_done
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_dishwasher_done
  mode: single
- id: '1729456902606'
  alias: Garage no motion
  description: ''
  trigger:
  - type: not_occupied
    platform: device
    device_id: 77b1c91800c080836f21f5086b6b1637
    entity_id: e9b79a0705db7c31f403d50ba412c0c0
    domain: binary_sensor
  condition: []
  action:
  - service: light.turn_off
    metadata: {}
    data: {}
    target:
      area_id: garage
  mode: single
- id: '1729603268211'
  alias: "\U0001F317 Night sensor changes"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.night
    - sensor.late_night
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F317 Night sensor changes"
  mode: single
- id: '1729911558411'
  alias: Kitchen bright when working at sink
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
  - type: illuminance
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 37ea7d3a6c5376b461fc8f786a2fa7ba
    domain: sensor
    above: 25
  condition:
  - type: is_illuminance
    condition: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 37ea7d3a6c5376b461fc8f786a2fa7ba
    domain: sensor
    above: 25
    below: 200
  - condition: state
    entity_id: sensor.night
    state: 'True'
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F6B6Home"
  - condition: device
    type: is_off
    device_id: 414a7c877c4f70cd81bcbeff928c74a2
    entity_id: 08c6dbbaeaa325e1df20653d3b7d7199
    domain: light
  - condition: state
    entity_id: input_boolean.kill_switch
    state: 'off'
  action:
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: kitchen
      style: bright
  mode: single
- id: '1729911930215'
  alias: Kitchen start shutdown when kitchen is dark
  description: Runs when the light in the kitchen drops when the kitchen light turns
    off. This is a sign of going to bed so it triggers the Night Shutdown routine.
  trigger:
  - type: illuminance
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 37ea7d3a6c5376b461fc8f786a2fa7ba
    domain: sensor
    below: 25
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F6B6Home"
  - condition: state
    entity_id: input_boolean.kill_switch
    state: 'off'
  action:
  - service: automation.trigger
    metadata: {}
    data:
      skip_condition: true
    target:
      entity_id: automation.night_shutdown
    enabled: false
  mode: single
- id: '1729912669719'
  alias: Kitchen lights dim late night
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 703f4a1f801db1aec0f32d10494ad7e1
    entity_id: 93a68192fdf79df4a311b0bda46c5f0a
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 8e351c86677483e308a3905c181e011e
    entity_id: b91fcd2f1f05fea25adc4ee71db2b6f2
    domain: binary_sensor
  condition:
  - type: is_illuminance
    condition: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 37ea7d3a6c5376b461fc8f786a2fa7ba
    domain: sensor
    below: 25
  - condition: state
    entity_id: sensor.late_night
    state: 'True'
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F6B6Home"
  - condition: state
    entity_id: input_boolean.kill_switch
    state: 'off'
  action:
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: dim
  mode: single
- id: '1729985445229'
  alias: "⏲️\U0001F357 Dinner timer"
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: dbae7f7854a2ef97c27a83114cc9acd0
    type: action
    subtype: hold
    enabled: false
  condition: []
  action:
  - service: light.turn_off
    metadata: {}
    data: {}
    target:
      area_id: kitchen
  - service: light.turn_on
    metadata: {}
    data:
      brightness_pct: 100
      rgb_color:
      - 240
      - 40
      - 213
    target:
      area_id: kitchen
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.kitchen_sink_light
  - service: light.turn_on
    metadata: {}
    data:
      brightness_pct: 100
      rgb_color:
      - 240
      - 60
      - 40
    target:
      entity_id: light.kitchen_sink_light
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.kitchen_sink_light
  - service: light.turn_on
    metadata: {}
    data:
      brightness_pct: 100
      rgb_color:
      - 240
      - 223
      - 40
    target:
      entity_id: light.kitchen_sink_light
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.kitchen_sink_light
  - service: light.turn_on
    metadata: {}
    data:
      brightness_pct: 100
      rgb_color:
      - 18
      - 171
      - 7
    target:
      entity_id: light.kitchen_sink_light
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.kitchen_sink_light
  - service: light.turn_on
    metadata: {}
    data:
      brightness_pct: 100
      rgb_color:
      - 239
      - 201
      - 97
    target:
      entity_id: light.kitchen_sink_light
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.kitchen_working
  mode: restart
- id: '1730045490635'
  alias: "\U0001F4DD Kitchen record light level"
  description: ''
  trigger:
  - platform: time_pattern
    seconds: /10
  condition: []
  action:
  - service: input_number.set_value
    target:
      entity_id: input_number.kitchen_light_level
    data:
      value: '{{ states(''sensor.kitchen_motion_illuminance_lux'') | float }}'
  mode: single
- id: '1730058846069'
  alias: "\U0001F4DD Record recent garage light level"
  description: ''
  trigger:
  - platform: time_pattern
    seconds: /30
  condition: []
  action:
  - service: input_number.set_value
    target:
      entity_id: input_number.recent_garage_light_level
    data:
      value: '{{ states(''sensor.garage_motion_backdoor_illuminance_lux'') | float
        }}'
  mode: single
- id: '1730517020705'
  alias: Kitchen lights off late night ready for dim
  description: ''
  trigger:
  - type: not_occupied
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - type: not_occupied
    platform: device
    device_id: 703f4a1f801db1aec0f32d10494ad7e1
    entity_id: 93a68192fdf79df4a311b0bda46c5f0a
    domain: binary_sensor
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: state
    entity_id: sensor.late_night
    state: 'True'
  - condition: state
    entity_id: input_boolean.kill_switch
    state: 'off'
  - condition: not
    conditions:
    - condition: time
      after: 06:00:00
  action:
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: dim
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: 'off'
  mode: restart
- id: '1730557604280'
  alias: "\U0001F45F Dropzone motion"
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 703f4a1f801db1aec0f32d10494ad7e1
    entity_id: 93a68192fdf79df4a311b0bda46c5f0a
    domain: binary_sensor
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F45F Dropzone motion"
  mode: single
- id: '1731274830496'
  alias: "\U0001F4D3 School Day Off Tomorrow"
  description: Triggers an action at 10 PM the day before an all-day event, with an
    additional check for "Afhs" in the title within the action block
  trigger:
  - platform: time
    at: '22:00:00'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: "{{ state_attr('calendar.school_days_off', 'message') == 'owen'
          and\n     (as_timestamp(state_attr('calendar.school_days_off', 'start_time'))
          | timestamp_custom('%Y-%m-%d')) == (now() + timedelta(days=1)).strftime('%Y-%m-%d')
          }}\n"
      sequence:
      - service: script.school_notifications
        data:
          notification_message: "\U0001F4D3 Owen is off tomorrow. Update Alexa alarms
            and routines."
  mode: single
- id: '1731279334512'
  alias: "\U0001F4D3 Remind School Day Off"
  description: ''
  trigger:
  - platform: time
    at: '22:00:00'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.owen_off_tomorrow
      state: 'on'
    - condition: state
      entity_id: input_boolean.william_off_tomorrow
      state: 'on'
    - condition: state
      entity_id: input_boolean.charlotte_off_tomorrow
      state: 'on'
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: ❓Some kids are off tomorrow. Disable any Alexa announcements?
      data:
        push:
        sound: Spell.caf
- id: '1731374918834'
  alias: Log back door light on
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: b95c94a8b8cdad187c610f1f0b3fd356
    entity_id: 5aba52409b2df46871b28bd7c588c84f
    domain: light
  condition: []
  action:
  - service: logbook.log
    metadata: {}
    data:
      name: Garage Back Door Light
      message: Turned on
      entity_id: light.garage_back_door_light
  mode: single
- id: '1731374985678'
  alias: Log Back Door Light offp
  description: ''
  trigger:
  - platform: device
    type: turned_off
    device_id: b95c94a8b8cdad187c610f1f0b3fd356
    entity_id: 5aba52409b2df46871b28bd7c588c84f
    domain: light
  condition: []
  action:
  - service: logbook.log
    metadata: {}
    data:
      name: Garage Back Door Light
      message: Light turned off
      entity_id: light.garage_back_door_light
  mode: single
- id: '1731820661043'
  alias: "\U0001F6B6 Restart Motion Timer"
  description: Starts a motion time if any motion detectors or doors opened. Since
    the office can remain occupied for longer than the timer, it waits and restarts
    the timer if the office is still occupied.
  trigger:
  - type: occupied
    platform: device
    device_id: 77b1c91800c080836f21f5086b6b1637
    entity_id: e9b79a0705db7c31f403d50ba412c0c0
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 541858278f8e0f3bfab5b64b39701cbe
    entity_id: 35849acbafd284cc880dae68ccd797e5
    domain: binary_sensor
    id: skip late night
  - type: occupied
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 703f4a1f801db1aec0f32d10494ad7e1
    entity_id: 93a68192fdf79df4a311b0bda46c5f0a
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
    entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
    domain: binary_sensor
    id: skip late night
  - type: occupied
    platform: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 2ac10bd896fc2c426a515aa2ba327c7a
    entity_id: 776b6800aeba54d534d9be9f427bbd38
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 8e351c86677483e308a3905c181e011e
    entity_id: b91fcd2f1f05fea25adc4ee71db2b6f2
    domain: binary_sensor
  - platform: state
    entity_id:
    - sensor.any_door_open
    from: 'False'
    to: 'True'
  - platform: device
    type: turned_on
    device_id: 8ca1474cea6a4122af672bd220ed9ce6
    entity_id: da6f242407f98532354fcdab4aedd601
    domain: remote
  - platform: device
    type: turned_on
    device_id: 292acdc67899cdf277b9566472be9d3e
    entity_id: a5117341821e5ac924716e4e86e8a62c
    domain: remote
  - platform: device
    type: turned_on
    device_id: b70b4a9d53afe7325df470dafb82fefc
    entity_id: db784245fa4078508b71df52a55384cd
    domain: remote
  - type: occupied
    platform: device
    device_id: 236765636ad6b4830327b44e7b9ab4ca
    entity_id: 77ac37fbd504457b6317913dc74dc3ad
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 71ccf4e7c04c9f999b4d4e69de0ec325
    entity_id: 41a502ce172a9fc7aaa3cde86c62039c
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 73b0e9f01107a7254f075391c15b3ca3
    entity_id: 46110b9ab6ad4190ca4bde8d99b7386d
    domain: binary_sensor
  condition:
  - condition: not
    conditions:
    - condition: and
      conditions:
      - condition: trigger
        id:
        - skip late night
      - condition: state
        entity_id: sensor.late_night
        state: 'True'
  action:
  - service: timer.start
    metadata: {}
    data:
      duration: 0:45:00
    target:
      entity_id: timer.last_motion_timer
  - type: turn_on
    device_id: 774d6fb710d8da34ec85694e9ca44e4f
    entity_id: acd08dbaa913032a7150b1f9ce72fbcd
    domain: remote
  - condition: state
    entity_id: sensor.late_night
    state: 'False'
    enabled: false
  - delay:
      hours: 0
      minutes: 30
      seconds: 0
      milliseconds: 0
    enabled: false
  - condition: state
    entity_id: binary_sensor.office_motion_sensor_occupancy
    state: 'on'
    enabled: false
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.last_motion_timer
    enabled: false
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F4BC\U0001F6B6 Reset house motion timer because office still
        occupied"
    enabled: false
  mode: single
- id: '1731858470851'
  alias: "\U0001F532 Notify house appears empty"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'True'
    to: 'False'
  condition:
  - condition: state
    entity_id: sensor.late_night
    state: 'False'
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F532 The house appears empty. Do you want to change the HVAC
        or arm security?"
  - device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
    domain: select
    entity_id: b9cdfe91458734f5b458b1a7525f2f8a
    type: select_option
    option: away
  - device_id: e107fd237c3ce1ff46b28fd9730fb308
    domain: select
    entity_id: 3830dc0f63623ab1bc8ce328082975c8
    type: select_option
    option: away
  mode: single
- id: '1732229370217'
  alias: "\U0001F4D3 \U0001F4C5 Set School Days Off"
  description: ''
  trigger:
  - platform: time
    at: 00:00:00
    id: today
  - platform: time
    at: '10:00:00'
    id: tomorrow
  - platform: time
    at: '12:00:00'
    id: tomorrow
  - platform: state
    entity_id:
    - input_boolean.school_test
    from: 'off'
    to: 'on'
    id: tomorrow
  - platform: state
    entity_id:
    - input_boolean.school_test
    from: 'on'
    to: 'off'
    id: today
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - today
      sequence:
      - choose:
        - conditions:
          - condition: template
            value_template: ' {{ (as_timestamp(state_attr(''calendar.owen_days_off'',
              ''start_time''))   | timestamp_custom(''%Y-%m-%d'')) == now().strftime(''%Y-%m-%d'')
              }}

              '
          sequence:
          - service: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.owen_off_today
        default:
        - service: input_boolean.turn_off
          metadata: {}
          data: {}
          target:
            entity_id: input_boolean.owen_off_today
      - choose:
        - conditions:
          - condition: template
            value_template: ' {{ (as_timestamp(state_attr(''calendar.william_charlotte_days_off'',
              ''start_time''))   | timestamp_custom(''%Y-%m-%d'')) == now().strftime(''%Y-%m-%d'')
              }}

              '
          sequence:
          - service: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.william_off_today
        default:
        - service: input_boolean.turn_off
          metadata: {}
          data: {}
          target:
            entity_id: input_boolean.william_off_today
      - choose:
        - conditions:
          - condition: template
            value_template: ' {{ (as_timestamp(state_attr(''calendar.william_charlotte_days_off'',
              ''start_time''))   | timestamp_custom(''%Y-%m-%d'')) == now().strftime(''%Y-%m-%d'')
              }}

              '
          sequence:
          - service: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.charlotte_off_today
        default:
        - service: input_boolean.turn_off
          metadata: {}
          data: {}
          target:
            entity_id: input_boolean.charlotte_off_today
    - conditions:
      - condition: trigger
        id:
        - tomorrow
      sequence:
      - choose:
        - conditions:
          - condition: template
            value_template: ' {{ (as_timestamp(state_attr(''calendar.owen_days_off'',
              ''start_time''))   | timestamp_custom(''%Y-%m-%d'')) == (now() + timedelta(days=1)).strftime(''%Y-%m-%d'')
              }}

              '
          sequence:
          - service: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.owen_off_tomorrow
        default:
        - service: input_boolean.turn_off
          metadata: {}
          data: {}
          target:
            entity_id: input_boolean.owen_off_tomorrow
      - choose:
        - conditions:
          - condition: template
            value_template: ' {{ (as_timestamp(state_attr(''calendar.william_charlotte_days_off'',
              ''start_time''))   | timestamp_custom(''%Y-%m-%d'')) == (now() + timedelta(days=1)).strftime(''%Y-%m-%d'')
              }}

              '
          sequence:
          - service: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.william_off_tomorrow
        default:
        - service: input_boolean.turn_off
          metadata: {}
          data: {}
          target:
            entity_id: input_boolean.william_off_tomorrow
      - choose:
        - conditions:
          - condition: template
            value_template: ' {{ (as_timestamp(state_attr(''calendar.william_charlotte_days_off'',
              ''start_time''))   | timestamp_custom(''%Y-%m-%d'')) == (now() + timedelta(days=1)).strftime(''%Y-%m-%d'')
              }}

              '
          sequence:
          - service: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.charlotte_off_tomorrow
        default:
        - service: input_boolean.turn_off
          metadata: {}
          data: {}
          target:
            entity_id: input_boolean.charlotte_off_tomorrow
  mode: single
- id: '1732279172296'
  alias: "\U0001F4D3\U0001F4E3 School calendar changed"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - calendar.owen_days_off
    attribute: start_time
    id: Owen
  - platform: state
    entity_id:
    - calendar.william_charlotte_days_off
    attribute: start_time
    id: William and Charlotte
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F4C5 {{ trigger.id }} school calendar changed\n"
      data:
        push:
          sound:
            name: school-bell.wav
  mode: single
- id: '1732288674455'
  alias: Owen has school today sensor changed
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.owen_has_school_today
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F441️‍\U0001F5E8️\U0001F535\U0001F4D3 The \"Owen has school
        today\" sensor changed to: {{ states('sensor.owen_has_school_today') }}\n"
  mode: single
- id: '1732310194599'
  alias: "\U0001F4A1\U0001F317 Dim Lights"
  description: turn lights on to dim then off so they will be dim if turned on by
    Alexa
  trigger:
  - platform: time
    at: 00:30:00
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F6B6Home"
  action:
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.kitchen_late_night
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.kitchen_off
  mode: single
- id: '1732319462322'
  alias: "\U0001F3E1 Deck Door"
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 67ea44ea7a2992266ef085c35b5bb0b2
    entity_id: 8eac68d685601dd2c7827ba9f0b83a97
    domain: binary_sensor
    id: opened
  - type: not_opened
    platform: device
    device_id: 67ea44ea7a2992266ef085c35b5bb0b2
    entity_id: 8eac68d685601dd2c7827ba9f0b83a97
    domain: binary_sensor
    id: closed
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - opened
      sequence:
      - service: counter.increment
        metadata: {}
        data: {}
        target:
          entity_id: counter.deck_door_openings
      - service: timer.start
        metadata: {}
        data: {}
        target:
          entity_id: timer.deck_door
      - condition: state
        entity_id: sensor.late_night
        state: 'True'
      - service: scene.turn_on
        metadata: {}
        target:
          entity_id: scene.alarm_on
  mode: single
- id: '1732461509676'
  alias: "\U0001F697\U0001F525 Turn on Alexa warm car reminder"
  description: ''
  trigger:
  - platform: time
    at: 06:46:00
  condition:
  - condition: state
    entity_id: sensor.owen_has_school_today
    state: 'True'
  - condition: numeric_state
    entity_id: sensor.ktta_temperature
    below: 60
  action:
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.remind_warm_up_car
    data: {}
  - service: notify.mobile_app_iphone703
    data:
      message: "\U0001F697\U0001F525 Warm up the car"
  mode: single
- id: '1732461822454'
  alias: "\U0001F504 Reset daily configs at midnight"
  description: ''
  trigger:
  - platform: time
    at: 00:00:00
  condition: []
  action:
  - service: input_boolean.turn_off
    target:
      entity_id:
      - input_boolean.remind_warm_up_car
    data: {}
  - service: input_datetime.set_datetime
    target:
      entity_id: input_datetime.back_door_first_opened
    data:
      time: 00:00:00
  mode: single
- id: '1732469467911'
  alias: "\U0001F3E1\U0001F513 Check deck door locked"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - timer.deck_door
    from: active
    to: idle
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F3E1\U0001F513Make sure the deck door is locked"
  mode: single
- id: '1732470642008'
  alias: "\U0001F3B6 Door open"
  description: chime when the doors open and then I'm out of warning if it's left
    open
  trigger:
  - platform: state
    entity_id:
    - sensor.any_door_open
    from: 'False'
    to: 'True'
  condition: []
  action:
  - choose:
    - conditions:
      - type: is_open
        condition: device
        device_id: 42b3221a9d1eb5af8681b7bc0e1f79fe
        entity_id: fa80046087de8b5e333b3d305814448c
        domain: binary_sensor
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.back_door_opened_recently
    - conditions:
      - type: is_open
        condition: device
        device_id: 9e390a614d30fa2788bbc0b2677695fa
        entity_id: 04c10c2cfad9f91306b93a7446560b38
        domain: binary_sensor
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.front_door_opened_recently
    - conditions:
      - type: is_open
        condition: device
        device_id: 67ea44ea7a2992266ef085c35b5bb0b2
        entity_id: 8eac68d685601dd2c7827ba9f0b83a97
        domain: binary_sensor
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.deck_door_opened_recently
    - conditions:
      - type: is_open
        condition: device
        device_id: 2838551eb36c440364ff5b2c486f4a23
        entity_id: c9df7503c1f20615ae8caa0a78418a5d
        domain: binary_sensor
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.deck_screen_door_opened_recently
    - conditions:
      - type: is_open
        condition: device
        device_id: 476a681cae7660e1792c6cf16230622d
        entity_id: 638bc5477ed4445c2e292b10ccac7653
        domain: binary_sensor
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.garage_door_small_opened_recently
  - service: media_player.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: media_player.office_homepod
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.office_motion_sensor_occupancy
        state: 'off'
      sequence:
      - service: media_player.volume_set
        metadata: {}
        data:
          volume_level: 1
        target:
          entity_id: media_player.office_homepod
  - service: media_player.play_media
    metadata: {}
    data:
      media_content_id: media-source://media_source/local/app_sounds/door-chime.mp3
      media_content_type: music
    target:
      entity_id: media_player.office_homepod
  - service: media_player.volume_set
    metadata: {}
    data:
      volume_level: 0.5
    target:
      entity_id: media_player.office_homepod
  mode: restart
- id: '1732638953203'
  alias: "\U0001F532 Set house away"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    to: 'False'
    from: 'True'
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F6B6Home"
  - condition: state
    entity_id: sensor.late_night
    state: 'off'
  action:
  - service: input_select.select_option
    target:
      entity_id: input_select.house_mode
    data:
      option: "\U0001F532 Away"
  - type: turn_off
    device_id: 8b0cd80f68079d986cc411142a084fab
    entity_id: cf37edf642f257de80cf9248a9069ed0
    domain: light
  mode: single
- id: '1732639140817'
  alias: "\U0001F6B6Set house to home"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    to: 'True'
    from: 'False'
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F532 Away"
  action:
  - service: input_select.select_option
    target:
      entity_id: input_select.house_mode
    data:
      option: "\U0001F6B6Home"
  mode: single
- id: '1732740272360'
  alias: Vacation night lights on
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.night
    to: 'True'
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F3DD️ Vacation"
  action:
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.vacation_lights_on
  mode: single
- id: '1732740416569'
  alias: Vacation lights off
  description: ''
  trigger:
  - platform: time
    at: '23:00:00'
  condition:
  - condition: state
    entity_id: input_select.house_mode
    state: "\U0001F3DD️ Vacation"
  action:
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.vacation_lights_off
  mode: single
- id: '1732742625815'
  alias: ‼️ Alarm triggered
  description: ''
  trigger:
  - platform: state
    entity_id:
    - timer.last_motion_timer
    from: idle
    to: active
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.house_mode
      state: "\U0001F3DD️ Vacation"
    - condition: state
      entity_id: input_select.house_mode
      state: "\U0001F532 Away"
    - condition: state
      entity_id: input_select.house_mode
      state: "\U0001F510 Armed Home"
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: ‼️ Alarm triggered while you’re not home!
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.alarm_on
  mode: single
- id: '1732808288344'
  alias: Play YouTube on Sony Bravia TV
  description: Play a YouTube channel on the Sony Bravia TV at a specific time
  trigger:
  - platform: time
    at: '18:00:00'
  condition: []
  action:
  - service: remote.send_command
    data:
      command:
      - Home
      delay_secs: 0.4
    target:
      entity_id: remote.sony_xbr_55x850g
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: media_player.play_media
    target:
      entity_id: media_player.sony_xbr_55x850g
    data:
      media_content_type: app
      media_content_id: YouTube
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: remote.send_command
    data:
      command:
      - Confirm
      - Down
      - Confirm
    target:
      entity_id: remote.sony_xbr_55x850g
  mode: single
- id: '1733089958200'
  alias: "‼️\U0001F6AA Door left open"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.any_door_open
    from: 'False'
    to: 'True'
  condition: []
  action:
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: sensor.any_door_open
          state: 'True'
      sequence:
      - service: media_player.volume_set
        metadata: {}
        data:
          volume_level: 1
        target:
          entity_id: media_player.office_homepod
      - service: scene.turn_on
        metadata: {}
        target:
          entity_id: scene.door_open
  mode: queued
  max: 10
- id: '1733340344176'
  alias: Turn off the TV when I just picked up from school
  description: ''
  trigger:
  - platform: time
    at: '14:25:00'
  condition:
  - condition: state
    entity_id: sensor.owen_has_school_today
    state: 'True'
  action:
  - type: turn_off
    device_id: b70b4a9d53afe7325df470dafb82fefc
    entity_id: db784245fa4078508b71df52a55384cd
    domain: remote
  mode: single
- id: '1733410144815'
  alias: "\U0001F45A Set Laundry Start and End"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.washer_running
  condition: []
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.from_state.state == "False" and trigger.to_state.state
          == "True" }}

          '
      sequence:
      - service: input_datetime.set_datetime
        target:
          entity_id: input_datetime.washer_started
        data:
          timestamp: '{{ now().timestamp() }}'
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          date: '1970-01-01'
          time: 00:00:00
        target:
          entity_id: input_datetime.washer_ended
    - conditions:
      - condition: template
        value_template: '{{ trigger.from_state.state == "True" and trigger.to_state.state
          == "False" }}

          '
      sequence:
      - service: input_datetime.set_datetime
        target:
          entity_id: input_datetime.washer_ended
        data:
          timestamp: '{{ now().timestamp() }}'
  mode: single
- id: '1733500186940'
  alias: "\U0001F45A Laundry Start/End Notifications"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.washer_running
    from: 'False'
    to: 'True'
    id: started
  - platform: state
    entity_id:
    - sensor.washer_running
    from: 'True'
    to: 'False'
    id: ended
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - started
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F45A Started"
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - choose:
        - conditions:
          - condition: numeric_state
            entity_id: sensor.washer_current_ratio_3_min
            above: 4
          sequence:
          - service: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.washer_high_current_start
          - service: timer.start
            metadata: {}
            data:
              duration: 02:15:00
            target:
              entity_id: timer.waster_estimated_duration
          - service: notify.mobile_app_iphone703
            data:
              message: "\U0001F45A Longer washer cycle"
        - conditions:
          - condition: numeric_state
            entity_id: sensor.washer_current_ratio_3_min
            below: 3.9
          sequence:
          - service: input_boolean.turn_off
            target:
              entity_id:
              - input_boolean.washer_high_current_start
            data: {}
          - service: timer.start
            metadata: {}
            data:
              duration: 01:05:00
            target:
              entity_id: timer.waster_estimated_duration
    - conditions:
      - condition: trigger
        id:
        - ended
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F45A Ended"
      - service: input_boolean.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.washer_high_current_start
    default:
    - service: notify.mobile_app_iphone703
      metadata: {}
      data:
        message: Testing laundry
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    - choose:
      - conditions:
        - condition: numeric_state
          entity_id: sensor.washer_current_ratio_3_min
          above: 4
        sequence:
        - service: input_boolean.turn_on
          metadata: {}
          data: {}
          target:
            entity_id: input_boolean.washer_high_current_start
        - service: timer.start
          metadata: {}
          data:
            duration: 02:15:00
          target:
            entity_id: timer.waster_estimated_duration
        - service: notify.mobile_app_iphone703
          data:
            message: "\U0001F45A Longer washer cycle"
      - conditions:
        - condition: numeric_state
          entity_id: sensor.washer_current_ratio_3_min
          below: 3.9
        sequence:
        - service: input_boolean.turn_off
          target:
            entity_id:
            - input_boolean.washer_high_current_start
          data: {}
        - service: timer.start
          metadata: {}
          data:
            duration: 01:20:00
          target:
            entity_id: timer.waster_estimated_duration
  mode: single
- id: '1733601404745'
  alias: "\U0001F6AARecent door timer start"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.front_door_opened_recently
    from: 'off'
    to: 'on'
    id: front door
  - platform: state
    entity_id:
    - input_boolean.deck_door_opened_recently
    from: 'off'
    to: 'on'
    id: deck door
  - platform: state
    entity_id:
    - input_boolean.back_door_opened_recently
    from: 'off'
    to: 'on'
    id: back door
  - platform: state
    entity_id:
    - input_boolean.deck_screen_door_opened_recently
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.recent_door_notification
  mode: parallel
  max: 10
- id: '1733664347931'
  alias: "\U0001F6AA Reset recent door open toggles"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - timer.recent_door_notification
    from: active
    to: idle
  condition: []
  action:
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.deck_door_opened_recently
      - input_boolean.front_door_opened_recently
      - input_boolean.back_door_opened_recently
      - input_boolean.deck_screen_door_opened_recently
  mode: single
- id: '1733706977808'
  alias: Sync Alexa Booleans
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.late_night
    - sensor.night
  condition: []
  action:
  - service: input_boolean.turn_{{ 'on' if is_state('sensor.night', 'True') else 'off'
      }}
    target:
      entity_id: input_boolean.alexa_night
  - service: input_boolean.turn_{{ 'on' if is_state('sensor.late_night', 'True') else
      'off' }}
    target:
      entity_id: input_boolean.alexa_late_night
  mode: single
- id: '1733890165420'
  alias: "\U0001F312  Set night shutdown"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.recent_downstairs_motiin
    from: 'on'
    to: 'off'
  condition:
  - condition: state
    entity_id: sensor.night
    state: 'True'
  - condition: time
    after: '22:30:00'
  - condition: state
    entity_id: input_boolean.kill_switch
    state: 'off'
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.shutting_down_house_for_night
  mode: restart
- id: '1734280270541'
  alias: "\U0001F45A Spin Cycle Started"
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.washer_current_ratio
    for:
      hours: 0
      minutes: 0
      seconds: 3
    above: 8
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F45A Spin Cycle Started"
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  mode: single
- id: '1734883280052'
  alias: Hourly automations
  description: ''
  trigger:
  - platform: time
    at: '12:00:00'
  condition: []
  action:
  - type: turn_on
    device_id: 774d6fb710d8da34ec85694e9ca44e4f
    entity_id: acd08dbaa913032a7150b1f9ce72fbcd
    domain: remote
  mode: single
- id: '1734883282726'
  alias: Hourly automations
  description: ''
  trigger:
  - platform: time
    at: '12:00:00'
  condition: []
  action:
  - type: turn_on
    device_id: 774d6fb710d8da34ec85694e9ca44e4f
    entity_id: acd08dbaa913032a7150b1f9ce72fbcd
    domain: remote
  mode: single
- id: '1734977272840'
  alias: "\U0001F5BC️ Picture frame offline notify"
  description: ''
  trigger:
  - type: power
    platform: device
    device_id: 0e68c40eb3b7f1ec567326a292743d27
    entity_id: 5cd81783e882ee94dc2e81bcb7012b3b
    domain: sensor
    below: 5
    for:
      hours: 0
      minutes: 1
      seconds: 0
    enabled: false
  - platform: numeric_state
    entity_id:
    - sensor.kitchen_picture_frame_plug_power
    below: 4.8
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: time
    at: 05:55:00
  - platform: time
    at: '12:55:00'
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F5BC️ Picture frame offline"
    enabled: false
  - type: turn_off
    device_id: 0e68c40eb3b7f1ec567326a292743d27
    entity_id: 11de3141aa19aa793282d38aafb74b7b
    domain: switch
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - type: turn_on
    device_id: 0e68c40eb3b7f1ec567326a292743d27
    entity_id: 11de3141aa19aa793282d38aafb74b7b
    domain: switch
  mode: single
- id: '1735236882354'
  alias: "\U0001F5A8️ Daily printer reboot"
  description: ''
  trigger:
  - platform: time
    at: '22:00:00'
  condition: []
  action:
  - type: turn_off
    device_id: ed2e4e7a4d06672d1b73cdf57cf5fc22
    entity_id: 59023d4495467d016037c3f0b40cfb1e
    domain: switch
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - type: turn_on
    device_id: ed2e4e7a4d06672d1b73cdf57cf5fc22
    entity_id: 59023d4495467d016037c3f0b40cfb1e
    domain: switch
  mode: single
- id: '1735326019000'
  alias: "\U0001F5A8️ Alexa Printer Announcements"
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.office_printer_plug_power
    for:
      hours: 0
      minutes: 0
      seconds: 1
    above: 100
  condition:
  - condition: time
    after: '22:02:00'
    before: '21:58:00'
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_something_printed
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_something_printed
  mode: single
- id: '1735534520320'
  alias: Late night turn off lights
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'True'
  condition:
  - condition: state
    entity_id: sensor.late_night
    state: 'True'
  action:
  - service: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.kitchen_off
  mode: single
- id: '1735581985568'
  alias: "\U0001F384 Christmas Tree On"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.christmas_tree
    from: 'off'
    to: 'on'
    id: schedule
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'False'
    to: 'True'
  condition:
  - condition: state
    entity_id: schedule.christmas_tree
    state: 'on'
  - condition: device
    type: is_off
    device_id: 0093ea3f1ba37445559ac43cfc37c0d4
    entity_id: 39829ea5e7a25b916fd7921bbb081b31
    domain: switch
  - condition: state
    entity_id: sensor.recent_house_motion
    state: 'True'
  action:
  - type: turn_on
    device_id: 0093ea3f1ba37445559ac43cfc37c0d4
    entity_id: 39829ea5e7a25b916fd7921bbb081b31
    domain: switch
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F384 Christmas tree turned on"
  mode: single
- id: '1735582796890'
  alias: "\U0001F384 Christmas Tree Off"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.christmas_tree
    from: 'on'
    to: 'off'
    id: schedule
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'True'
    to: 'False'
  condition:
  - condition: device
    type: is_on
    device_id: 0093ea3f1ba37445559ac43cfc37c0d4
    entity_id: 39829ea5e7a25b916fd7921bbb081b31
    domain: switch
  action:
  - type: turn_off
    device_id: 0093ea3f1ba37445559ac43cfc37c0d4
    entity_id: 39829ea5e7a25b916fd7921bbb081b31
    domain: switch
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F384 Christmas tree turned off"
  mode: single
- id: '1735583644414'
  alias: "\U0001F384 Christmas Mantel On"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.christmas_tree
    from: 'off'
    to: 'on'
    id: schedule
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'False'
    to: 'True'
  condition:
  - condition: state
    state: 'on'
    entity_id: schedule.christmas_tree
  - condition: device
    type: is_off
    device_id: 49db66be40a2beb89d5ad2515998210d
    entity_id: a6a89432b0cd7cedb3c34d66ede569d3
    domain: switch
  - condition: state
    entity_id: sensor.recent_house_motion
    state: 'True'
  action:
  - type: turn_on
    device_id: 49db66be40a2beb89d5ad2515998210d
    entity_id: a6a89432b0cd7cedb3c34d66ede569d3
    domain: switch
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F384 Christmas mantel turned on"
  mode: single
- id: '1735583718266'
  alias: "\U0001F384 Christmas Mantel Off"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.christmas_tree
    from: 'on'
    to: 'off'
    id: schedule
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'True'
    to: 'False'
  condition:
  - condition: device
    type: is_on
    device_id: 49db66be40a2beb89d5ad2515998210d
    entity_id: a6a89432b0cd7cedb3c34d66ede569d3
    domain: switch
  action:
  - type: turn_off
    device_id: 49db66be40a2beb89d5ad2515998210d
    entity_id: a6a89432b0cd7cedb3c34d66ede569d3
    domain: switch
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F384 Christmas mantel turned off"
  mode: single
- id: '1735585767727'
  alias: "\U0001F384 Christmas Outdoor Lights On"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.christmas_outdoor_lights
    from: 'off'
    to: 'on'
    id: schedule
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'False'
    to: 'True'
  condition:
  - condition: state
    state: 'on'
    entity_id: schedule.christmas_outdoor_lights
  - condition: state
    entity_id: sensor.recent_house_motion
    state: 'True'
  - condition: or
    conditions:
    - condition: device
      type: is_off
      device_id: e2d59c61ff071dba7696a591be54e49a
      entity_id: 761d7c49d0b22a3ec37bd8c3373bd161
      domain: switch
    - condition: device
      type: is_off
      device_id: f22c7822005cc4cab0d1e9ac366cdc91
      entity_id: bf87abd425a1598e4ccdc3d57e566540
      domain: switch
  action:
  - type: turn_on
    device_id: e2d59c61ff071dba7696a591be54e49a
    entity_id: 761d7c49d0b22a3ec37bd8c3373bd161
    domain: switch
  - type: turn_on
    device_id: f22c7822005cc4cab0d1e9ac366cdc91
    entity_id: bf87abd425a1598e4ccdc3d57e566540
    domain: switch
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F384 Christmas outdoor lights turned on"
  mode: single
- id: '1735585931137'
  alias: "\U0001F384 Christmas Outdoor Lights Off"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.christmas_outdoor_lights
    from: 'on'
    to: 'off'
    id: schedule
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'True'
    to: 'False'
  condition:
  - condition: or
    conditions:
    - condition: device
      type: is_on
      device_id: e2d59c61ff071dba7696a591be54e49a
      entity_id: 761d7c49d0b22a3ec37bd8c3373bd161
      domain: switch
    - condition: device
      type: is_on
      device_id: f22c7822005cc4cab0d1e9ac366cdc91
      entity_id: bf87abd425a1598e4ccdc3d57e566540
      domain: switch
  action:
  - type: turn_off
    device_id: e2d59c61ff071dba7696a591be54e49a
    entity_id: 761d7c49d0b22a3ec37bd8c3373bd161
    domain: switch
  - type: turn_off
    device_id: f22c7822005cc4cab0d1e9ac366cdc91
    entity_id: bf87abd425a1598e4ccdc3d57e566540
    domain: switch
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F384 Christmas outdoor lights turned off"
  - parallel: []
  mode: single
- id: '1735602817489'
  alias: Coat closet dim at late night
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 541858278f8e0f3bfab5b64b39701cbe
    entity_id: 35849acbafd284cc880dae68ccd797e5
    domain: binary_sensor
  condition:
  - condition: device
    type: is_off
    device_id: 8b0cd80f68079d986cc411142a084fab
    entity_id: cf37edf642f257de80cf9248a9069ed0
    domain: light
  - condition: state
    entity_id: sensor.late_night
    state: 'True'
  action:
  - service: script.set_recessed_light
    data:
      device: light.coat_closet_hall
      style: dim
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - service: script.set_recessed_light
    metadata: {}
    data:
      device: light.coat_closet_hall
      style: 'off'
  mode: single
- id: '1736018124375'
  alias: "\U0001F6B6Reset Motion Timer - Working in Office"
  description: ''
  trigger:
  - platform: time_pattern
    minutes: /30
  condition:
  - condition: state
    entity_id: sensor.late_night
    state: 'False'
  - type: is_occupied
    condition: device
    device_id: 541858278f8e0f3bfab5b64b39701cbe
    entity_id: 35849acbafd284cc880dae68ccd797e5
    domain: binary_sensor
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.last_motion_timer
  mode: single
- id: '1736566511797'
  alias: Water heater leak detected
  description: ''
  trigger:
  - type: moist
    platform: device
    device_id: 19e890cfc29d0eb553340ece386964bb
    entity_id: 798574f75b500db265a8a1e9955b6d18
    domain: binary_sensor
    id: garage
  - type: moist
    platform: device
    device_id: 710d1854cf756ea270a373cf6811f6e7
    entity_id: d9b6667e75cf76b78ccd1a6f6c9139c2
    domain: binary_sensor
    id: crawlspace
  - type: moist
    platform: device
    device_id: 9f0568b9831e1bdcf3e869a76bcda2c3
    entity_id: d50acb1c7b8df95c0809a2b45a82ea52
    domain: binary_sensor
    id: laundry
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F6A8\U0001F4A6 LEAK DETECTED!"
      data:
        push:
          sound: findsounds.com-submarine.wav
  - choose:
    - conditions:
      - condition: trigger
        id:
        - garage
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.leak_in_garage
      - service: logbook.log
        metadata: {}
        data:
          message: "\U0001F6A8\U0001F4A6 Leak detected in the garage"
          entity_id: binary_sensor.garage_water_heater_leak_water_leak
    - conditions:
      - condition: trigger
        id:
        - crawlspace
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.leak_in_crawlspace
      - service: logbook.log
        metadata: {}
        data:
          message: "\U0001F6A8\U0001F4A6 Leak detected in the crawlspace"
          entity_id: binary_sensor.crawlspace_leak_water_leak
    - conditions:
      - condition: trigger
        id:
        - laundry
      sequence:
      - service: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.leak_in_laundry_room
      - service: logbook.log
        metadata: {}
        data:
          message: "\U0001F6A8\U0001F4A6 Leak detected in the laundry room"
          entity_id: binary_sensor.laundry_washer_leak_water_leak
  mode: single
- id: '1736638615040'
  alias: "\U0001F305 Evening Lights On"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.downstairs_lights
    from: 'off'
    to: 'on'
  - platform: state
    entity_id:
    - sensor.night
    from: 'False'
    to: 'True'
  condition:
  - condition: state
    entity_id: schedule.downstairs_lights
    state: 'on'
  - condition: state
    entity_id: sensor.night
    state: 'True'
  action:
  - type: turn_off
    device_id: b0b9b9b97ed32c7d0854c2b8a318f7f7
    entity_id: ebfefcf50885301b8f516327dde917d1
    domain: light
  - type: turn_on
    device_id: 414a7c877c4f70cd81bcbeff928c74a2
    entity_id: 08c6dbbaeaa325e1df20653d3b7d7199
    domain: light
  mode: single
- id: '1736858267503'
  alias: Turn off morning lights
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.average_sunlight
    above: 100
    id: light
  - platform: state
    entity_id:
    - schedule.wake_up
    from: 'on'
    to: 'off'
    id: wakeup
  condition:
  - type: is_not_occupied
    condition: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: trigger
          id:
          - light
        - condition: state
          entity_id: schedule.wake_up
          state: 'on'
      sequence:
      - service: light.turn_off
        metadata: {}
        data: {}
        target:
          label_id: downstairs
    - conditions:
      - condition: trigger
        id:
        - wakeup
      sequence:
      - service: light.turn_off
        metadata: {}
        data: {}
        target:
          label_id: downstairs
    default:
    - service: light.turn_off
      metadata: {}
      data: {}
      target:
        label_id: downstairs
  mode: single
- id: '1737259408962'
  alias: Turn Recent Downstairs Motion On
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 8e351c86677483e308a3905c181e011e
    entity_id: b91fcd2f1f05fea25adc4ee71db2b6f2
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 703f4a1f801db1aec0f32d10494ad7e1
    entity_id: 93a68192fdf79df4a311b0bda46c5f0a
    domain: binary_sensor
  condition: []
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.recent_downstairs_motiin
  mode: single
- id: '1737261039894'
  alias: Turn off recent downstairs motion
  description: ''
  trigger:
  - type: not_occupied
    platform: device
    device_id: 8e351c86677483e308a3905c181e011e
    entity_id: b91fcd2f1f05fea25adc4ee71db2b6f2
    domain: binary_sensor
  - type: not_occupied
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
  - type: not_occupied
    platform: device
    device_id: 703f4a1f801db1aec0f32d10494ad7e1
    entity_id: 93a68192fdf79df4a311b0bda46c5f0a
    domain: binary_sensor
  condition: []
  action:
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - condition: and
    conditions:
    - type: is_not_occupied
      condition: device
      device_id: 8e351c86677483e308a3905c181e011e
      entity_id: b91fcd2f1f05fea25adc4ee71db2b6f2
      domain: binary_sensor
    - type: is_not_occupied
      condition: device
      device_id: 703f4a1f801db1aec0f32d10494ad7e1
      entity_id: 93a68192fdf79df4a311b0bda46c5f0a
      domain: binary_sensor
    - type: is_not_occupied
      condition: device
      device_id: 5bf555cdca449351d0604088da9bab9b
      entity_id: 7114081b053df5792dc1515126d4487f
      domain: binary_sensor
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.recent_downstairs_motiin
    data: {}
  mode: restart
- id: '1737312976237'
  alias: Cancel nightly shutdown
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.recent_downstairs_motiin
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.shutting_down_house_for_night
    state: 'on'
  action:
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.shutting_down_house_for_night
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: bright
  mode: single
- id: '1737313941297'
  alias: Shut down the house
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.shutting_down_house_for_night
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: red
  - service: media_player.media_pause
    metadata: {}
    data: {}
    target:
      entity_id: media_player.sony_xbr_55x850g
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - condition: state
    entity_id: input_boolean.shutting_down_house_for_night
    state: 'on'
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: dim
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: 'off'
  - type: turn_off
    device_id: a9d0cee5de7afb677a53b92ca828721d
    entity_id: a57b1117888d399ec157605bf0f4d8aa
    domain: remote
  - type: turn_off
    device_id: b70b4a9d53afe7325df470dafb82fefc
    entity_id: db784245fa4078508b71df52a55384cd
    domain: remote
  - type: turn_off
    device_id: c879297a402a20b452c50410c40b72d2
    entity_id: 7cef3ced64efa588838c6c0d36d16d98
    domain: switch
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.shutting_down_house_for_night
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.awake
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.sleeping
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.waiting_first_kitchen_morning
  mode: single
- id: '1737605004057'
  alias: Recurring water leak alarm
  description: ''
  trigger:
  - platform: time_pattern
    minutes: '10'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.leak_in_garage
      state: 'on'
    - condition: state
      entity_id: input_boolean.leak_in_laundry_room
      state: 'on'
    - condition: state
      entity_id: input_boolean.leak_in_crawlspace
      state: 'on'
  action: []
  mode: single
- id: '1737830942554'
  alias: "\U0001F4D3 Set Alexa School Announcements"
  description: ''
  trigger:
  - platform: time
    at: 06:50:00
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: sensor.william_has_school_today
      state: 'True'
    - condition: state
      entity_id: sensor.charlotte_has_school_today
      state: 'True'
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_make_school_wake_announcements
  - delay:
      hours: 0
      minutes: 15
      seconds: 0
      milliseconds: 0
  - service: input_boolean.turn_off
    target:
      entity_id:
      - input_boolean.alexa_make_school_departure_announcements
    data: {}
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.alexa_make_school_wake_announcements
      - input_boolean.alexa_make_school_departure_announcements
  mode: single
- id: '1737892048242'
  alias: "\U0001F333 Backyard lights"
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 42b3221a9d1eb5af8681b7bc0e1f79fe
    entity_id: fa80046087de8b5e333b3d305814448c
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: 67ea44ea7a2992266ef085c35b5bb0b2
    entity_id: 8eac68d685601dd2c7827ba9f0b83a97
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: 2838551eb36c440364ff5b2c486f4a23
    entity_id: c9df7503c1f20615ae8caa0a78418a5d
    domain: binary_sensor
  - platform: device
    type: turned_on
    device_id: b95c94a8b8cdad187c610f1f0b3fd356
    entity_id: 5aba52409b2df46871b28bd7c588c84f
    domain: light
  - type: opened
    platform: device
    device_id: 476a681cae7660e1792c6cf16230622d
    entity_id: 638bc5477ed4445c2e292b10ccac7653
    domain: binary_sensor
  - platform: state
    entity_id:
    - input_boolean.steve_on_wifi
    from: 'off'
    to: 'on'
  - platform: state
    entity_id:
    - input_boolean.katharine_on_wifi
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: sensor.night
    state: 'True'
  - condition: device
    type: is_off
    device_id: c879297a402a20b452c50410c40b72d2
    entity_id: 7cef3ced64efa588838c6c0d36d16d98
    domain: switch
  action:
  - type: turn_on
    device_id: c879297a402a20b452c50410c40b72d2
    entity_id: 7cef3ced64efa588838c6c0d36d16d98
    domain: switch
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: c879297a402a20b452c50410c40b72d2
    entity_id: 7cef3ced64efa588838c6c0d36d16d98
    domain: switch
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - type: turn_on
    device_id: c879297a402a20b452c50410c40b72d2
    entity_id: 7cef3ced64efa588838c6c0d36d16d98
    domain: switch
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: c879297a402a20b452c50410c40b72d2
    entity_id: 7cef3ced64efa588838c6c0d36d16d98
    domain: switch
  mode: restart
- id: '1738149464760'
  alias: Kitchen bright lights morning routine
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.kitchen_motion_illuminance_lux
    above: 10
  condition:
  - condition: state
    entity_id: schedule.wake_up
    state: 'on'
  action:
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: bright
  mode: single
- id: '1738544972785'
  alias: ⏰ Wake up for Owen
  description: ''
  trigger:
  - platform: time
    at: 06:03:00
  condition:
  - condition: state
    entity_id: sensor.owen_has_school_today
    state: 'True'
  - condition: state
    entity_id: input_boolean.owen_on_wifi
    state: 'on'
  action:
  - service: media_player.turn_on
    metadata: {}
    data: {}
    target:
      area_id: office
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: media_player.volume_set
    metadata: {}
    data:
      volume_level: 0.6
    target:
      area_id: office
  - service: tts.speak
    metadata: {}
    data:
      cache: true
      message: Time to wake up for Owen! Steve, are you waking up?
      media_player_entity_id: media_player.office_homepod
    target:
      entity_id: tts.home_assistant_cloud
  mode: single
- id: '1738548569269'
  alias: "\U0001F354❌ Not all kids have lunch"
  description: ''
  trigger:
  - platform: time
    at: 06:35:00
  condition:
  - condition: state
    entity_id: sensor.owen_has_school_today
    state: 'True'
  - condition: or
    conditions:
    - condition: state
      entity_id: sensor.william_has_school_today
      state: 'False'
    - condition: state
      entity_id: sensor.charlotte_has_school_today
      state: 'False'
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F354❌ Don’t make all the lunches"
      data:
        sound: sms-received4.caf
  mode: single
- id: '1738591276944'
  alias: "\U0001F6AA Log First Back Door Open Time After 5 AM"
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.back_door_contact
    from: 'off'
    to: 'on'
  condition:
  - condition: time
    after: 05:00:00
  - condition: template
    value_template: '{{ states(''input_datetime.back_door_first_opened'') == ''00:00:00''
      }}'
  action:
  - service: input_datetime.set_datetime
    target:
      entity_id: input_datetime.back_door_first_opened
    data:
      time: '{{ now().strftime(''%H:%M:%S'') }}'
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.awake
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.sleeping
  mode: single
- id: '1738592515178'
  alias: "\U0001F305 Awake"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.awake
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: script.set_downstairs_lights
    metadata: {}
    data:
      label: downstairs
      style: bright
  - type: turn_on
    device_id: a9d0cee5de7afb677a53b92ca828721d
    entity_id: a57b1117888d399ec157605bf0f4d8aa
    domain: remote
  mode: single
- id: '1739625093904'
  alias: "\U0001F321️ Set Climate Ecobee States"
  description: ''
  trigger:
  - platform: state
    entity_id:
    - climate.downstairs_ecobee
    attribute: hvac_action
    id: downstairs
  - platform: state
    entity_id:
    - climate.upstairs_ecobee
    attribute: hvac_action
    id: upstairs
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - downstairs
      sequence:
      - service: input_text.set_value
        metadata: {}
        data:
          value: '{{ state_attr(''climate.downstairs_ecobee'', ''hvac_action'') }}'
        target:
          entity_id: input_text.downstairs_ecobee_state
    - conditions:
      - condition: trigger
        id:
        - upstairs
      sequence:
      - service: input_text.set_value
        metadata: {}
        data:
          value: '{{ state_attr(''climate.upstairs_ecobee'', ''hvac_action'') }}'
        target:
          entity_id: input_text.upstairs_ecobee_state
  mode: single
- id: '1739627342128'
  alias: "\U0001F321️ Set Ecobee Air Conditioner Energy"
  description: ''
  trigger:
  - id: downstairs_on
    platform: state
    entity_id:
    - input_text.downstairs_ecobee_state
    from:
    - idle
    - 'off'
    to:
    - heating
    - cooling
    - preheating
    - drying
    - fan
  - id: downstairs_off
    platform: state
    entity_id:
    - input_text.downstairs_ecobee_state
    from:
    - heating
    - cooling
    - preheating
    - drying
    - fan
    to:
    - idle
    - 'off'
  - id: upstairs_on
    platform: state
    entity_id:
    - input_text.upstairs_ecobee_state
    from:
    - idle
    - 'off'
    to:
    - heating
    - cooling
    - preheating
    - drying
    - fan
  - id: upstairs_off
    platform: state
    entity_id:
    - input_text.upstairs_ecobee_state
    from:
    - heating
    - cooling
    - preheating
    - drying
    - fan
    to:
    - idle
    - 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - downstairs_on
      sequence:
      - service: input_number.set_value
        target:
          entity_id: input_number.downstairs_ecobee_energy
        data:
          value: 2.5
    - conditions:
      - condition: trigger
        id:
        - downstairs_off
      sequence:
      - service: input_number.set_value
        target:
          entity_id: input_number.downstairs_ecobee_energy
        data:
          value: 0
    - conditions:
      - condition: trigger
        id:
        - upstairs_on
      sequence:
      - service: input_number.set_value
        target:
          entity_id: input_number.upstairs_ecobee_energy
        data:
          value: 2.5
    - conditions:
      - condition: trigger
        id:
        - upstairs_off
      sequence:
      - service: input_number.set_value
        target:
          entity_id: input_number.upstairs_ecobee_energy
        data:
          value: 0
  mode: single
- id: '1739648337457'
  alias: Turn Recent Upstairs Motion on
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 2ac10bd896fc2c426a515aa2ba327c7a
    entity_id: 776b6800aeba54d534d9be9f427bbd38
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
    entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
  - platform: device
    type: turned_on
    device_id: 292acdc67899cdf277b9566472be9d3e
    entity_id: a5117341821e5ac924716e4e86e8a62c
    domain: remote
    id: master-tv
  - platform: device
    device_id: 1bcae1f11577c720fb3ec0d1ff2984b9
    domain: media_player
    entity_id: ec548845815feeeeac2f403673639a3d
    type: paused
    id: master-tv
  - platform: device
    device_id: 292acdc67899cdf277b9566472be9d3e
    domain: media_player
    entity_id: a2e2dc2acde5ab8e3ee37371cb47ae85
    type: playing
    id: master-tv
  - type: occupied
    platform: device
    device_id: 236765636ad6b4830327b44e7b9ab4ca
    entity_id: 77ac37fbd504457b6317913dc74dc3ad
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 71ccf4e7c04c9f999b4d4e69de0ec325
    entity_id: 41a502ce172a9fc7aaa3cde86c62039c
    domain: binary_sensor
  - type: occupied
    platform: device
    device_id: 73b0e9f01107a7254f075391c15b3ca3
    entity_id: 46110b9ab6ad4190ca4bde8d99b7386d
    domain: binary_sensor
  condition: []
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.recent_upstairs_motion
  mode: single
- id: '1739648430186'
  alias: Turn off Recent Upstairs Motion
  description: ''
  trigger:
  - type: not_occupied
    platform: device
    device_id: 2ac10bd896fc2c426a515aa2ba327c7a
    entity_id: 776b6800aeba54d534d9be9f427bbd38
    domain: binary_sensor
  - type: not_occupied
    platform: device
    device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
    entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
    domain: binary_sensor
  - type: not_occupied
    platform: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
  condition: []
  action:
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - condition: and
    conditions:
    - type: is_not_occupied
      condition: device
      device_id: 2ac10bd896fc2c426a515aa2ba327c7a
      entity_id: 776b6800aeba54d534d9be9f427bbd38
      domain: binary_sensor
    - type: is_not_occupied
      condition: device
      device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
      entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
      domain: binary_sensor
    - type: is_not_occupied
      condition: device
      device_id: 4045ad03705b1a1db194ca6220ef6210
      entity_id: 70103ab535967624969f508590e4012b
      domain: binary_sensor
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.recent_upstairs_motion
  mode: restart
- id: 7acf1cfb-2f52-491f-8809-96dd87213072
  alias: Update Monthly Totals with Daily High/Low
  description: 'Also sets the daily high/low values to hardcoded values to allow them
    to increment throughout the day. '
  trigger:
  - platform: time
    at: '23:55:00'
  action:
  - service: input_number.set_value
    entity_id: input_number.monthly_high_total
    data:
      value: '{{ states(''input_number.monthly_high_total'') | float(0) + states(''input_number.daily_high'')
        | float(0) }}'
  - service: input_number.set_value
    entity_id: input_number.monthly_low_total
    data:
      value: '{{ states(''input_number.monthly_low_total'') | float(0) + states(''input_number.daily_low'')
        | float(0) }}'
  - service: input_number.set_value
    entity_id: input_number.monthly_day_count
    data:
      value: '{{ states(''input_number.monthly_day_count'') | int(0) + 1 }}'
  - service: input_number.set_value
    entity_id: input_number.daily_high
    data:
      value: -50
    enabled: false
  - service: input_number.set_value
    entity_id: input_number.daily_low
    data:
      value: 150
    enabled: false
- id: cooling-ratio-calculation
  alias: "\U0001F321️  Daily Cooling Ratio Calculation Heat Index"
  description: ''
  trigger:
  - platform: time
    at: '23:55:00'
  action:
  - service: input_number.set_value
    target:
      entity_id: input_number.daily_downstairs_cooling_ratio
    data:
      value: '{% set cooling_minutes = states(''sensor.downstairs_minutes_cooling'')
        | float(0) %} {% set max_heat_index = states(''input_number.daily_max_heat_index'')
        | float(1) %} {{ (cooling_minutes / max_heat_index) | round(2) if max_heat_index
        > 0 else 0 }}

        '
  - service: input_number.set_value
    target:
      entity_id: input_number.daily_upstairs_cooling_ratio
    data:
      value: '{% set cooling_minutes = states(''sensor.upstairs_minutes_cooling'')
        | float(0) %} {% set max_heat_index = states(''input_number.daily_max_heat_index'')
        | float(1) %} {{ (cooling_minutes / max_heat_index) | round(2) if max_heat_index
        > 0 else 0 }}

        '
- id: 7a505329-fadd-4f28-a28d-28bce4fd10d4
  alias: Reset Monthly High/Low Averages on the First of the Month
  trigger:
  - platform: time
    at: 00:00:00
  condition:
  - condition: template
    value_template: '{{ now().day == 1 }}'
  action:
  - service: input_number.set_value
    target:
      entity_id: input_number.monthly_high_total
    data:
      value: 0
  - service: input_number.set_value
    target:
      entity_id: input_number.monthly_low_total
    data:
      value: 0
  - service: input_number.set_value
    target:
      entity_id: input_number.monthly_day_count
    data:
      value: 0
- id: 5f08a289-9ee1-4f3a-8b1c-36aad34cc43b
  alias: Track Daily High and Low Temperatures
  trigger:
  - platform: time_pattern
    minutes: /30
  condition:
  - condition: template
    value_template: '{{ states(''sensor.ktta_temperature'') is not none }}'
  - condition: not
    conditions:
    - condition: time
      after: 00:00:00
  action:
  - variables:
      current_temp: '{{ states(''sensor.ktta_temperature'') | float(0) }}'
  - service: input_number.set_value
    entity_id: input_number.daily_high
    data:
      value: '{{ [states(''input_number.daily_high'') | float(0), current_temp] |
        max }}

        '
  - service: input_number.set_value
    entity_id: input_number.daily_low
    data:
      value: '{{ [states(''input_number.daily_low'') | float(0), current_temp] | min
        }}

        '
- id: '1740853473284'
  alias: First Kitchen Appearance
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 5bf555cdca449351d0604088da9bab9b
    entity_id: 7114081b053df5792dc1515126d4487f
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.waiting_first_kitchen_morning
    state: 'on'
  - condition: time
    after: 05:00:00
    before: 09:00:00
  action:
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.waiting_first_kitchen_morning
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ktta_temperature
        below: 30
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          rgb_color:
          - 97
          - 24
          - 124
          brightness_pct: 100
        target:
          entity_id: light.kitchen_sink_light
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ktta_temperature
        below: 40
        above: 29.9
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          rgb_color:
          - 0
          - 66
          - 169
          brightness_pct: 100
        target:
          entity_id: light.kitchen_sink_light
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ktta_temperature
        below: 50
        above: 39.9
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          rgb_color:
          - 40
          - 95
          - 244
          brightness_pct: 100
        target:
          entity_id: light.kitchen_sink_light
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ktta_temperature
        below: 60
        above: 49.9
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          rgb_color:
          - 254
          - 251
          - 65
          brightness_pct: 100
        target:
          entity_id: light.kitchen_sink_light
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ktta_temperature
        below: 70
        above: 59.9
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          rgb_color:
          - 247
          - 206
          - 70
          brightness_pct: 100
        target:
          entity_id: light.kitchen_sink_light
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ktta_temperature
        below: 80
        above: 69.9
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          rgb_color:
          - 226
          - 36
          - 0
          brightness_pct: 100
        target:
          entity_id: light.kitchen_sink_light
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ktta_temperature
        above: 80
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          rgb_color:
          - 131
          - 17
          - 0
          brightness_pct: 100
        target:
          entity_id: light.kitchen_sink_light
  mode: single
- id: '1740854860349'
  alias: Living Room TV unavailable
  description: ''
  trigger:
  - platform: state
    entity_id:
    - media_player.bravia_4k_vh22
    to: unavailable
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F4FA❌ Living room TV unavailable"
  mode: single
- id: '1740855024777'
  alias: Coat Closet Unavailable
  description: ''
  trigger:
  - platform: state
    entity_id:
    - light.coat_closet_hall
    to: unavailable
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F4A1 Coat Closet Light Unavailable"
  mode: single
- id: '1741233937659'
  alias: Coat closet with motion and Steve Wifi
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.recent_downstairs_motiin
    from: 'off'
    to: 'on'
  - platform: state
    entity_id:
    - input_boolean.steve_on_wifi
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.steve_on_wifi
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.average_sunlight
    below: 200
  action:
  - type: turn_on
    device_id: 8b0cd80f68079d986cc411142a084fab
    entity_id: cf37edf642f257de80cf9248a9069ed0
    domain: light
  mode: single
- id: '1742941387704'
  alias: Alexa screen door announcement
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 2838551eb36c440364ff5b2c486f4a23
    entity_id: c9df7503c1f20615ae8caa0a78418a5d
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: timer.wait_for_next_screen_door_announcement
    state: idle
  action:
  - service: notify.mobile_app_iphone703
    data:
      message: ⚠️ Screen door opened
      data:
        sound: facility-siren.wav
    enabled: true
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_screen_door_open
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: input_boolean.turn_off
    target:
      entity_id:
      - input_boolean.alexa_screen_door_open
    data: {}
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.wait_for_next_screen_door_announcement
  mode: single
- id: '1742941958702'
  alias: Alexa warning screen door open
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 67ea44ea7a2992266ef085c35b5bb0b2
    entity_id: 8eac68d685601dd2c7827ba9f0b83a97
    domain: binary_sensor
  condition:
  - type: is_open
    condition: device
    device_id: 2838551eb36c440364ff5b2c486f4a23
    entity_id: c9df7503c1f20615ae8caa0a78418a5d
    domain: binary_sensor
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: ⚠️ Screen door is open!
      data:
        sound: facility-siren.wav
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_warning_screen_door_open
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_warning_screen_door_open
  mode: single
- id: '1743271944032'
  alias: "\U0001F4FA TV Plugs"
  description: ''
  trigger:
  - platform: device
    type: turned_off
    device_id: 28764d6877d8ffc859a072c89ae08e44
    entity_id: 92f447872a42e65eb14664ccc175ada2
    domain: switch
  - platform: device
    type: turned_off
    device_id: 1121cf8f02ad18578af897ec2e0a2192
    entity_id: 9b27175238f57adb29bf9c6c1cb996b4
    domain: switch
  - platform: device
    type: turned_off
    device_id: ecef90c728c13395b868501b6af8a5e1
    entity_id: de98132cc7348d5590a94a00f9b387cc
    domain: switch
  condition: []
  action:
  - type: turn_on
    device_id: 28764d6877d8ffc859a072c89ae08e44
    entity_id: 92f447872a42e65eb14664ccc175ada2
    domain: switch
  - type: turn_on
    device_id: 1121cf8f02ad18578af897ec2e0a2192
    entity_id: 9b27175238f57adb29bf9c6c1cb996b4
    domain: switch
  - type: turn_on
    device_id: ecef90c728c13395b868501b6af8a5e1
    entity_id: de98132cc7348d5590a94a00f9b387cc
    domain: switch
  mode: single
- id: '1743536746894'
  alias: "\U0001F321️ Update HVAC Energy Every Hour"
  description: Update the running total KWh based on the minutes of heating/cooling
  trigger:
  - platform: time_pattern
    minutes: 59
    seconds: 0
  action:
  - service: input_number.set_value
    target:
      entity_id: input_number.downstairs_ecobee_energy
    data:
      value: '{% set current = states(''input_number.downstairs_ecobee_energy'') |
        float(0) %} {% set heat = states(''sensor.downstairs_minutes_heating_hourly'')
        | float(0) %} {% set cool = states(''sensor.downstairs_minutes_cooling_hourly'')
        | float(0) %} {% set kwh_add = ((heat + cool) ) * 2.5 %} {{ (current + kwh_add)
        | round(2) }}

        '
  - service: input_number.set_value
    target:
      entity_id: input_number.upstairs_ecobee_energy
    data:
      value: '{% set current = states(''input_number.upstairs_ecobee_energy'') | float(0)
        %} {% set heat = states(''sensor.upstairs_minutes_heating_hourly'') | float(0)
        %} {% set cool = states(''sensor.upstairs_minutes_cooling_hourly'') | float(0)
        %} {% set kwh_add = ((heat + cool) ) * 2.5 %} {{ (current + kwh_add) | round(2)
        }}

        '
- id: '1743713373414'
  alias: ❄️ Turn off Upstairs Ecobee since empty
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.recent_upstairs_motion
    from: 'on'
    to: 'off'
    id: no motion
  - platform: state
    entity_id:
    - schedule.upstairs_ecobee_schedule
    from: 'off'
    to: 'on'
    id: schedule
  condition:
  - condition: state
    entity_id: schedule.upstairs_ecobee_schedule
    state: 'on'
  - condition: state
    entity_id: input_boolean.alexa_cool_upstairs
    state: 'off'
  - condition: numeric_state
    entity_id: sensor.ktta_temperature
    above: 70
  - condition: state
    entity_id: input_boolean.heat_wave
    state: 'off'
    alias: "Confirm \U0001F975 Heat Wave is off because that will keep AC going"
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - no motion
      sequence:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
  - condition: state
    entity_id: input_boolean.recent_upstairs_motion
    state: 'off'
  - device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
    domain: select
    entity_id: b9cdfe91458734f5b458b1a7525f2f8a
    type: select_option
    option: away
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.paused_upstairs_ecobee
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: ❌❄️ Turning off upstairs Ecobee
    enabled: false
  mode: single
- id: '1743714131268'
  alias: ❄️ Turn on Upstairs Ecobee since motion
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.recent_upstairs_motion
    from: 'off'
    to: 'on'
    id: motion
  - platform: state
    entity_id:
    - schedule.upstairs_ecobee_schedule
    from: 'on'
    to: 'off'
    id: schedule
  condition:
  - condition: state
    entity_id: input_boolean.anyone_home
    state: 'on'
  - condition: state
    entity_id: input_boolean.heat_wave
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion
      - condition: state
        entity_id: schedule.upstairs_ecobee_schedule
        state: 'on'
      - condition: state
        entity_id: input_boolean.paused_upstairs_ecobee
        state: 'on'
      sequence:
      - device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
        domain: select
        entity_id: b9cdfe91458734f5b458b1a7525f2f8a
        type: select_option
        option: home
      - service: input_boolean.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.paused_upstairs_ecobee
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          data: {}
          message: ▶️ Turn upstairs Ecobee back on
        enabled: false
    - conditions:
      - condition: trigger
        id:
        - schedule
      sequence:
      - device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
        domain: select
        entity_id: b9cdfe91458734f5b458b1a7525f2f8a
        type: select_option
        option: home
      - service: input_boolean.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.paused_upstairs_ecobee
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: ⏰ Ecobee saving schedule is over
        enabled: false
  mode: single
- id: '1743816219648'
  alias: Turn off Master Bedroom TV late night
  description: ''
  trigger:
  - platform: time
    at: 01:00:00
  - platform: time
    at: 01:30:00
  condition: []
  action:
  - service: media_player.volume_set
    metadata: {}
    data:
      volume_level: 0
    target:
      entity_id: media_player.master_bedroom_tv
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: media_player.media_pause
    metadata: {}
    data: {}
    target:
      entity_id: media_player.bravia_vu31
  - delay:
      hours: 0
      minutes: 1
      seconds: 0
      milliseconds: 0
  - condition: state
    entity_id: media_player.master_bedroom_tv
    attribute: volume_level
    state: 0
  - type: turn_off
    device_id: dfcd8127c11f911f3dfda80156d1b162
    entity_id: 739c2382be3ad952e3aeed8e2c7eea57
    domain: remote
    enabled: true
  mode: restart
- id: '1743851373363'
  alias: Update TV app id
  description: Update input_text with current app_id
  trigger:
  - platform: state
    entity_id: media_player.bravia_4k_vh22
    attribute: app_id
  - platform: device
    type: turned_on
    device_id: a9d0cee5de7afb677a53b92ca828721d
    entity_id: a57b1117888d399ec157605bf0f4d8aa
    domain: remote
  - platform: device
    device_id: a9d0cee5de7afb677a53b92ca828721d
    domain: media_player
    entity_id: ef2f6b850ea21c16397681dd71266d2c
    type: playing
  condition: []
  action:
  - service: input_text.set_value
    target:
      entity_id: input_text.current_app_id
    data:
      value: '{{ state_attr(''media_player.bravia_4k_vh22'', ''app_id'') }}'
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: '{{ state_attr(''media_player.bravia_4k_vh22'', ''app_id'') }}'
  mode: single
- id: '1743871991147'
  alias: People came back home
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'False'
    to: 'True'
  - platform: state
    entity_id:
    - input_boolean.steve_on_wifi
    from: 'off'
    to: 'off'
  - platform: state
    entity_id:
    - input_boolean.katharine_on_wifi
    from: 'off'
    to: 'off'
  condition: []
  action:
  - device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
    domain: select
    entity_id: b9cdfe91458734f5b458b1a7525f2f8a
    type: select_option
    option: home
  - device_id: e107fd237c3ce1ff46b28fd9730fb308
    domain: select
    entity_id: 3830dc0f63623ab1bc8ce328082975c8
    type: select_option
    option: home
  mode: single
- id: '1743947529171'
  alias: "\U0001F4A4 William and Charlotte not awake for school"
  description: ''
  trigger:
  - platform: time
    at: 07:05:00
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: sensor.william_has_school_today
      state: 'True'
    - condition: state
      entity_id: sensor.charlotte_has_school_today
      state: 'True'
  - type: is_not_occupied
    condition: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F4A4 William and Charlotte haven’t woke up!"
      data:
        sound: alarm-clock.wav
  mode: single
- id: '1743947818410'
  alias: "\U0001F4A4 Owen not awake yet"
  description: ''
  trigger:
  - platform: time
    at: 06:40:00
  condition:
  - condition: state
    entity_id: sensor.owen_has_school_today
    state: 'True'
  - type: is_not_occupied
    condition: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
  - condition: state
    entity_id: input_boolean.owen_on_wifi
    state: 'on'
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F4A4 Owen hasn’t woke up!"
      data:
        sound: alarm-clock.wav
  mode: single
- id: '1743956551152'
  alias: "\U0001F4FA Turn off master bedroom TV when empty"
  description: ''
  trigger:
  - type: not_occupied
    platform: device
    device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
    entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
    domain: binary_sensor
    for:
      hours: 0
      minutes: 15
      seconds: 0
  condition:
  - condition: device
    device_id: 292acdc67899cdf277b9566472be9d3e
    domain: media_player
    entity_id: a2e2dc2acde5ab8e3ee37371cb47ae85
    type: is_on
  action:
  - type: turn_off
    device_id: 292acdc67899cdf277b9566472be9d3e
    entity_id: a5117341821e5ac924716e4e86e8a62c
    domain: remote
  mode: single
- id: '1743987305167'
  alias: Turn off coat closet if Steve not home
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.steve_on_wifi
    from: 'on'
    to: 'off'
  condition:
  - condition: state
    entity_id: sensor.night
    state: 'True'
  action:
  - type: turn_off
    device_id: 8b0cd80f68079d986cc411142a084fab
    entity_id: cf37edf642f257de80cf9248a9069ed0
    domain: light
  mode: single
- id: '1744035489736'
  alias: "\U0001F4FA Turn off TVs during school day when house empty"
  description: Turn off the TVs if Steve or Katharine leave the house, it's a school
    day, and there's no motion.
  trigger:
  - platform: state
    entity_id:
    - input_boolean.steve_on_wifi
    from: 'on'
    to: 'off'
  - platform: state
    entity_id:
    - input_boolean.katharine_on_wifi
    from: 'on'
    to: 'off'
  - platform: state
    entity_id:
    - input_boolean.recent_downstairs_motiin
    from: 'on'
    to: 'off'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: sensor.owen_has_school_today
      state: 'True'
    - condition: state
      entity_id: sensor.william_has_school_today
      state: 'True'
    - condition: state
      entity_id: sensor.charlotte_has_school_today
      state: 'True'
    - condition: state
      entity_id: input_boolean.recent_downstairs_motiin
      state: 'off'
    - condition: state
      entity_id: input_boolean.katharine_on_wifi
      state: 'off'
    - condition: time
      after: 08:00:00
    - condition: time
      before: '19:00:00'
  action:
  - choose:
    - conditions:
      - condition: device
        device_id: a9d0cee5de7afb677a53b92ca828721d
        domain: media_player
        entity_id: ef2f6b850ea21c16397681dd71266d2c
        type: is_on
      sequence:
      - type: turn_off
        device_id: a9d0cee5de7afb677a53b92ca828721d
        entity_id: a57b1117888d399ec157605bf0f4d8aa
        domain: remote
  - choose:
    - conditions:
      - condition: device
        device_id: dfcd8127c11f911f3dfda80156d1b162
        domain: media_player
        entity_id: 4243a025dcd10fee829485908a56c8ac
        type: is_on
      sequence:
      - type: turn_off
        device_id: dfcd8127c11f911f3dfda80156d1b162
        entity_id: 739c2382be3ad952e3aeed8e2c7eea57
        domain: remote
  mode: single
- id: '1744113716043'
  alias: Turn on Ecobees when arrive home
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.recent_house_motion
    from: 'False'
    to: 'True'
  - platform: state
    entity_id:
    - input_boolean.steve_on_wifi
    from: 'off'
    to: 'on'
  - platform: state
    entity_id:
    - input_boolean.katharine_on_wifi
    from: 'off'
    to: 'on'
  condition: []
  action:
  - device_id: e107fd237c3ce1ff46b28fd9730fb308
    domain: select
    entity_id: 3830dc0f63623ab1bc8ce328082975c8
    type: select_option
    option: home
  - device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
    domain: select
    entity_id: b9cdfe91458734f5b458b1a7525f2f8a
    type: select_option
    option: home
  mode: single
- id: '1744465206464'
  alias: Increment garage door counter and last open dates
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 476a681cae7660e1792c6cf16230622d
    entity_id: 638bc5477ed4445c2e292b10ccac7653
    domain: binary_sensor
    id: small
  - type: opened
    platform: device
    device_id: 46ff3e95b550709b0ef8cab15792561f
    entity_id: 49e58b47dec027a4af50bdd2466e53ac
    domain: binary_sensor
    id: large
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - small
      sequence:
      - service: counter.increment
        metadata: {}
        data: {}
        target:
          entity_id: counter.garage_door_small_opened
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.garage_door_small_last_opened
    - conditions:
      - condition: trigger
        id:
        - large
      sequence:
      - service: counter.increment
        metadata: {}
        data: {}
        target:
          entity_id: counter.garage_door_large_opened
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.garage_door_large_last_opened
  mode: single
- id: '1744548527717'
  alias: "\U0001F4BB Smart laptop charging"
  description: ''
  trigger:
  - platform: time_pattern
    minutes: '15'
    id: 'off'
  - platform: time_pattern
    minutes: '30'
    id: 'on'
  - alias: Trigger early for late night 1
    platform: time_pattern
    hours: '1'
    minutes: '05'
    id: 'on'
  - alias: Trigger early for late night 2
    platform: time_pattern
    hours: '2'
    minutes: '05'
    id: 'on'
  - alias: Trigger early for late night 3
    platform: time_pattern
    hours: '3'
    minutes: '05'
    id: 'on'
  - alias: Trigger early for late night 4
    platform: time_pattern
    hours: '4'
    minutes: '05'
    id: 'on'
  condition:
  - condition: state
    entity_id: schedule.laptop_plug_cycle
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - 'off'
      sequence:
      - type: turn_off
        device_id: 57621b38f6548905ac420d1b6bb041c7
        entity_id: 3731527d3962678fca89a29b86bf14e4
        domain: switch
    - conditions:
      - condition: trigger
        id:
        - 'on'
      sequence:
      - type: turn_on
        device_id: 57621b38f6548905ac420d1b6bb041c7
        entity_id: 3731527d3962678fca89a29b86bf14e4
        domain: switch
  mode: single
- id: '1744568323061'
  alias: Coat closet on/off
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.coat_closet_schedule
  - platform: numeric_state
    entity_id:
    - sensor.average_sunlight
    below: 200
    value_template: '200'
    id: 'on'
  - platform: numeric_state
    entity_id:
    - sensor.average_sunlight
    above: 200
  - platform: state
    entity_id:
    - input_boolean.steve_on_wifi
  condition: []
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: schedule.coat_closet_schedule
          state: 'on'
        - condition: numeric_state
          entity_id: sensor.average_sunlight
          below: 200
        - condition: state
          entity_id: input_boolean.steve_on_wifi
          state: 'on'
      sequence:
      - type: turn_on
        device_id: 8b0cd80f68079d986cc411142a084fab
        entity_id: cf37edf642f257de80cf9248a9069ed0
        domain: light
        brightness_pct: 95
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: schedule.coat_closet_schedule
          state: 'off'
        - condition: numeric_state
          entity_id: sensor.average_sunlight
          above: 200
        - condition: state
          entity_id: input_boolean.steve_on_wifi
          state: 'off'
      sequence:
      - type: turn_off
        device_id: 8b0cd80f68079d986cc411142a084fab
        entity_id: cf37edf642f257de80cf9248a9069ed0
        domain: light
  mode: single
- id: '1744631598189'
  alias: Reset garage door last open dates
  description: ''
  trigger:
  - type: not_opened
    platform: device
    device_id: 476a681cae7660e1792c6cf16230622d
    entity_id: 638bc5477ed4445c2e292b10ccac7653
    domain: binary_sensor
    id: small
  - type: not_opened
    platform: device
    device_id: 46ff3e95b550709b0ef8cab15792561f
    entity_id: 49e58b47dec027a4af50bdd2466e53ac
    domain: binary_sensor
    id: large
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - small
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '1970-01-01 00:00:00'
        target:
          entity_id: input_datetime.garage_door_small_last_opened
    - conditions:
      - condition: trigger
        id:
        - large
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '1970-01-01 00:00:00'
        target:
          entity_id: input_datetime.garage_door_large_last_opened
  mode: single
- id: '1744760650338'
  alias: ↕️ Set daily Low/High from get_forecasts
  description: ''
  trigger:
  - platform: time
    at: 06:00:00
  action:
  - service: weather.get_forecasts
    data:
      type: daily
    response_variable: forecast_result
    target:
      entity_id: weather.forecast_home
  - service: input_number.set_value
    target:
      entity_id: input_number.daily_low
    data:
      value: "{% set forecast = forecast_result['weather.forecast_home'].forecast
        %} {% if forecast %}\n  {{ forecast[0].templow }}\n{% else %}\n  0\n{% endif
        %}\n"
  - service: input_number.set_value
    target:
      entity_id: input_number.daily_high
    data:
      value: "{% set forecast = forecast_result['weather.forecast_home'].forecast
        %} {% if forecast %}\n  {{ forecast[0].temperature }}\n{% else %}\n  0\n{%
        endif %}\n"
  mode: single
- id: '1746375369155'
  alias: "\U0001F321️ Extreme house temperature"
  description: ''
  trigger:
  - platform: device
    device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
    domain: climate
    entity_id: 240825cac2a09f5693960918ad2984e6
    type: current_temperature_changed
    above: 77
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: too-hot
  - platform: device
    device_id: e107fd237c3ce1ff46b28fd9730fb308
    domain: climate
    entity_id: 44c333c6b9abedbfe1499127ee1cc6b3
    type: current_temperature_changed
    above: 77
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: too-hot
  - platform: device
    device_id: abebc99ac3bcf057336b1f0ef5e4d0c8
    domain: climate
    entity_id: 240825cac2a09f5693960918ad2984e6
    type: current_temperature_changed
    below: 60
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: too-cold
  - platform: device
    device_id: e107fd237c3ce1ff46b28fd9730fb308
    domain: climate
    entity_id: 44c333c6b9abedbfe1499127ee1cc6b3
    type: current_temperature_changed
    below: 60
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: too-cold
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - too-hot
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F525 House has gotten very hot."
          data:
            sound: hot-sizzle.wav
    - conditions:
      - condition: trigger
        id:
        - too-cold
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: ❄️ House has gotten very cold.
          data:
            sound: freezing.wav
    default:
    - service: notify.mobile_app_iphone703
      metadata: {}
      data:
        message: "\U0001F321️ Testing house temp sound"
        data:
          sound: hot-sizzle.wav
  mode: single
- id: '1746889670928'
  alias: "\U0001F6DC Reset Phone Wifi"
  description: Set boolean in phones to trigger phone short cut
  trigger:
  - platform: state
    entity_id:
    - timer.reset_phone_wifi
    from: active
    to: idle
  condition: []
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: Resetting phone wifi
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.reset_phone_wifi
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.reset_phone_wifi
  mode: single
- id: '1746977679236'
  alias: "\U0001F6DC Start reset Wifi timer when garage door closed"
  description: ''
  trigger:
  - type: not_opened
    platform: device
    device_id: 476a681cae7660e1792c6cf16230622d
    entity_id: 638bc5477ed4445c2e292b10ccac7653
    domain: binary_sensor
  - type: not_opened
    platform: device
    device_id: 46ff3e95b550709b0ef8cab15792561f
    entity_id: 49e58b47dec027a4af50bdd2466e53ac
    domain: binary_sensor
  condition: []
  action:
  - service: timer.start
    metadata: {}
    data: {}
    target:
      entity_id: timer.reset_phone_wifi
  mode: single
- id: '1747585794732'
  alias: "\U0001F4A6\U0001F37D️ Dishwasher 30 minutes left"
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.dishwasher_minutes_remaining
    below: 30
  condition: []
  action:
  - service: script.dishwasher_timer_notification
    data:
      notification_message: Dishwasher has 30 minutes left
  - condition: state
    entity_id: schedule.dishwasher_announcements
    state: 'on'
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_dishwasher_30_minutes_left
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_dishwasher_30_minutes_left
  mode: single
- id: '1747592805843'
  alias: "\U0001F6B6‍♀️‍➡️Most recent room motions"
  description: Records the most recent motion of various motion detectors
  trigger:
  - type: occupied
    platform: device
    device_id: 73b0e9f01107a7254f075391c15b3ca3
    entity_id: 46110b9ab6ad4190ca4bde8d99b7386d
    domain: binary_sensor
    id: charlotte
  - type: occupied
    platform: device
    device_id: 71ccf4e7c04c9f999b4d4e69de0ec325
    entity_id: 41a502ce172a9fc7aaa3cde86c62039c
    domain: binary_sensor
    id: william
  - type: occupied
    platform: device
    device_id: 236765636ad6b4830327b44e7b9ab4ca
    entity_id: 77ac37fbd504457b6317913dc74dc3ad
    domain: binary_sensor
    id: owen
  - type: occupied
    platform: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
    id: bathroom
  - type: occupied
    platform: device
    device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
    entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
    domain: binary_sensor
    id: bedroom
  - platform: state
    entity_id:
    - binary_sensor.office_motion_sensor_occupancy
    from: 'off'
    to: 'on'
    id: office
  - platform: state
    entity_id:
    - binary_sensor.kitchen_motion_occupancy
    from: 'off'
    to: 'on'
    id: kitchen
  - platform: state
    entity_id:
    - binary_sensor.dropzone_motion_occupancy
    from: 'off'
    to: 'on'
    id: dropzone
  - platform: state
    entity_id:
    - binary_sensor.garage_motion_backdoor_occupancy
    from: 'off'
    to: 'on'
    id: garage
  - platform: state
    entity_id:
    - binary_sensor.playroom_motion_occupancy
    from: 'off'
    to: 'on'
    id: playroom
  - platform: state
    entity_id:
    - binary_sensor.pantry_night_light_occupancy_3
    from: 'off'
    to: 'on'
    id: pantry
  - platform: state
    entity_id:
    - binary_sensor.living_room_motion_occupancy
    from: 'off'
    to: 'on'
    id: livingroom
  - type: occupied
    platform: device
    device_id: 541858278f8e0f3bfab5b64b39701cbe
    entity_id: 35849acbafd284cc880dae68ccd797e5
    domain: binary_sensor
    id: office
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - charlotte
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.charlotte_room_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - william
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.william_room_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - owen
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.owen_room_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - bedroom
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.master_bedroom_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - bathroom
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.master_bathroom_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - office
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.office_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - kitchen
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.kitchen_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - dropzone
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.dropzone_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - garage
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.garage_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - playroom
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.playroom_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - pantry
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.pantry_most_recent_motion
    - conditions:
      - condition: trigger
        id:
        - livingroom
      sequence:
      - service: input_datetime.set_datetime
        metadata: {}
        data:
          datetime: '{{ now().strftime(''%Y-%m-%d %H:%M:%S'') }}'
        target:
          entity_id: input_datetime.living_room_most_recent_motion
  mode: single
- id: '1747595318129'
  alias: "\U0001F305 Morning awake notifications"
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 71ccf4e7c04c9f999b4d4e69de0ec325
    entity_id: 41a502ce172a9fc7aaa3cde86c62039c
    domain: binary_sensor
    id: william
  - type: occupied
    platform: device
    device_id: 236765636ad6b4830327b44e7b9ab4ca
    entity_id: 77ac37fbd504457b6317913dc74dc3ad
    domain: binary_sensor
    id: owen
  - type: occupied
    platform: device
    device_id: 73b0e9f01107a7254f075391c15b3ca3
    entity_id: 46110b9ab6ad4190ca4bde8d99b7386d
    domain: binary_sensor
    id: charlotte
  - type: occupied
    platform: device
    device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
    entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
    domain: binary_sensor
    id: bedroom
  - type: occupied
    platform: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
    id: bathroom
  condition:
  - condition: state
    entity_id: schedule.kids_awake
    state: 'on'
    enabled: true
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - owen
      sequence:
      - condition: state
        entity_id: timer.owen_suppress_motion_alert
        state: idle
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F7E6 Owen is up"
          data:
            sound: ussd.caf
      - service: timer.start
        metadata: {}
        data: {}
        target:
          entity_id: timer.owen_suppress_motion_alert
    - conditions:
      - condition: trigger
        id:
        - william
      sequence:
      - condition: state
        entity_id: timer.william_suppress_motion_alert
        state: idle
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F7E9 William is up"
          data:
            sound: shake.caf
      - service: timer.start
        metadata: {}
        data: {}
        target:
          entity_id: timer.william_suppress_motion_alert
    - conditions:
      - condition: trigger
        id:
        - charlotte
      sequence:
      - condition: state
        entity_id: timer.charlotte_suppress_motion_alert
        state: idle
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001FA77 Charlotte is up"
          data:
            sound: short_double_high.caf
      - service: timer.start
        metadata: {}
        data: {}
        target:
          entity_id: timer.charlotte_suppress_motion_alert
    - conditions:
      - condition: trigger
        id:
        - bathroom
      sequence:
      - condition: state
        entity_id: timer.master_bathroom_suppress_motion_alert
        state: idle
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F6BD Bathroom motion"
          data:
            sound: short_double_low.caf
      - service: timer.start
        metadata: {}
        data: {}
        target:
          entity_id: timer.master_bathroom_suppress_motion_alert
    - conditions:
      - condition: trigger
        id:
        - bedroom
      sequence:
      - condition: state
        entity_id: timer.master_bedroom_suppress_motion_alert
        state: idle
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F6CC Bedroom motion"
          data:
            sound: ct-busy.caf
      - service: timer.start
        metadata: {}
        data: {}
        target:
          entity_id: timer.master_bedroom_suppress_motion_alert
        enabled: true
  mode: single
- id: '1747929477389'
  alias: Cooling downstairs for a long time
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: e107fd237c3ce1ff46b28fd9730fb308
    entity_id: 02e1034c6d87cfaaba809b190fa1eff8
    domain: sensor
    below: 71.1
    for:
      hours: 1
      minutes: 30
      seconds: 0
  condition:
  - condition: numeric_state
    entity_id: sensor.ktta_temperature
    above: 73
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: 'The downstairs has been cooling for a long time. Checked the thermostat.  '
  mode: single
- id: '1748791088177'
  alias: Pantry night light
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.pantry_night_light_occupancy_3
    from: 'off'
    to: 'on'
    id: motion
  - platform: state
    entity_id:
    - binary_sensor.pantry_night_light_occupancy_3
    from: 'on'
    to: 'off'
    id: empty
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion
      sequence:
      - service: light.turn_on
        metadata: {}
        data:
          brightness_pct: 100
        target:
          entity_id: light.pantry_night_light_light_3
    - conditions:
      - condition: trigger
        id:
        - empty
      sequence:
      - service: light.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: light.pantry_night_light_light_3
  mode: single
- id: '1750431294010'
  alias: Heat Wave
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_boolean.heat_wave
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: climate.set_temperature
    metadata: {}
    data:
      temperature: 71
      hvac_mode: cool
    target:
      device_id:
      - e107fd237c3ce1ff46b28fd9730fb308
      - abebc99ac3bcf057336b1f0ef5e4d0c8
  mode: single
- id: '1750617185063'
  alias: Turn on office fan when office occupied
  description: ''
  trigger:
  - type: occupied
    platform: device
    device_id: 541858278f8e0f3bfab5b64b39701cbe
    entity_id: 35849acbafd284cc880dae68ccd797e5
    domain: binary_sensor
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: numeric_state
    entity_id: input_number.daily_high
    above: 80
  action:
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.apple_home_office_fan
  mode: single
- id: '1743930000002'
  alias: Reset Daily Max Heat Index
  description: Reset the daily max heat index at midnight
  trigger:
  - platform: time
    at: 00:00:01
  action:
  - service: input_number.set_value
    target:
      entity_id: input_number.daily_max_heat_index
    data:
      value: 0
  mode: single
- id: '1743930000001'
  alias: Track Daily Max Heat Index
  description: Track the maximum heat index value throughout the day
  trigger:
  - platform: state
    entity_id: sensor.ktta_heat_index
  condition:
  - condition: numeric_state
    entity_id: sensor.ktta_heat_index
    above: 0
  action:
  - service: input_number.set_value
    target:
      entity_id: input_number.daily_max_heat_index
    data:
      value: '{% set current_heat_index = trigger.to_state.state | float(0) %} {%
        set daily_max = states(''input_number.daily_max_heat_index'') | float(0) %}
        {{ [daily_max, current_heat_index] | max }}

        '
  mode: single
- id: '1750731652197'
  alias: "\U0001F3CA‍♂️ Owen not awake for early swim"
  description: ''
  trigger:
  - platform: time
    at: 04:50:00
  condition:
  - type: is_not_occupied
    condition: device
    device_id: 236765636ad6b4830327b44e7b9ab4ca
    entity_id: 77ac37fbd504457b6317913dc74dc3ad
    domain: binary_sensor
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - condition: state
    entity_id: input_boolean.owen_on_wifi
    state: 'on'
  action:
  - service: notify.mobile_app_iphone703
    metadata: {}
    data:
      message: "\U0001F4A4 Owen hasn’t woke up!"
      data:
        sound: alarm-clock.wav
  mode: single
- id: '1719273830000'
  alias: Set Ecobee to Home mode - Tuesday return from swim meets
  description: Set both downstairs and upstairs Ecobee thermostats to Home mode on
    Tuesdays in June and July at 9:30PM
  trigger:
  - platform: time
    at: '21:00:00'
  condition:
  - condition: time
    weekday:
    - tue
  - condition: template
    value_template: '{{ now().month in [6, 7] }}'
  action:
  - service: climate.set_preset_mode
    target:
      entity_id:
      - climate.downstairs_ecobee
      - climate.upstairs_ecobee
    data:
      preset_mode: Home
  mode: single
- id: '1751062870540'
  alias: "\U0001F415 Maggie Upstairs Motion Detection"
  description: Monitors upstairs rooms for motion when the toggle is on and sends
    notifications
  trigger:
  - type: occupied
    platform: device
    device_id: 73b0e9f01107a7254f075391c15b3ca3
    entity_id: 46110b9ab6ad4190ca4bde8d99b7386d
    domain: binary_sensor
    id: charlotte
  - type: occupied
    platform: device
    device_id: 71ccf4e7c04c9f999b4d4e69de0ec325
    entity_id: 41a502ce172a9fc7aaa3cde86c62039c
    domain: binary_sensor
    id: william
  - type: occupied
    platform: device
    device_id: 236765636ad6b4830327b44e7b9ab4ca
    entity_id: 77ac37fbd504457b6317913dc74dc3ad
    domain: binary_sensor
    id: owen
  - type: occupied
    platform: device
    device_id: 4045ad03705b1a1db194ca6220ef6210
    entity_id: 70103ab535967624969f508590e4012b
    domain: binary_sensor
    id: bathroom
  - type: occupied
    platform: device
    device_id: 71eeaaccdfbcb19ec501fb586f2dfdc7
    entity_id: 932a7aecdf9969ecfaf3e7b558bc24aa
    domain: binary_sensor
    id: bedroom
  condition:
  - condition: state
    entity_id: input_boolean.maggie_upstairs_monitor
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - charlotte
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F415 Maggie detected in Charlotte's room!"
          data:
            push:
              sound: dog-bark.wav
    - conditions:
      - condition: trigger
        id:
        - william
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F415 Maggie detected in William's room!"
          data:
            push:
              sound: dog-bark.wav
    - conditions:
      - condition: trigger
        id:
        - owen
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F415 Maggie detected in Owen's room!"
          data:
            push:
              sound: dog-bark.wav
    - conditions:
      - condition: trigger
        id:
        - bathroom
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F415 Maggie detected in the master bathroom!"
          data:
            push:
              sound: dog-bark.wav
    - conditions:
      - condition: trigger
        id:
        - bedroom
      sequence:
      - service: notify.mobile_app_iphone703
        metadata: {}
        data:
          message: "\U0001F415 Maggie detected in the master bedroom!"
          data:
            push:
              sound: dog-bark.wav
  - condition: state
    entity_id: input_boolean.alexa_maggie_alert
    state: 'on'
  - service: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_maggie_alert
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.alexa_maggie_alert
  mode: single
- id: '1751062870541'
  alias: "\U0001F415 Alexa Maggie Monitor Toggle"
  description: Toggles the Maggie upstairs monitor when the Alexa toggle changes
  trigger:
  - platform: state
    entity_id: input_boolean.alexa_maggie_monitor
  condition: []
  action:
  - service: input_boolean.turn_{{ trigger.to_state.state }}
    target:
      entity_id: input_boolean.maggie_upstairs_monitor
  mode: single
- id: smart_night_light_pantry
  alias: "Smart Night Light - Pantry"
  description: "Controls the pantry night light with smart behavior"
  trigger:
    - platform: state
      entity_id: binary_sensor.pantry_night_light_occupancy_3
    - platform: state
      entity_id: sensor.night
    - platform: homeassistant
      event: start
  action:
    - service: script.smart_night_light
      data:
        motion_sensor: binary_sensor.pantry_night_light_occupancy_3
        light_entity: light.pantry_night_light_light_3
        illuminance_sensor: sensor.kitchen_motion_illuminance_lux
        darkness_threshold: 25
        dim_brightness: 20
        bright_brightness: 255
        timeout: 60
  mode: restart

- id: smart_night_light_coat_closet
  alias: "Smart Night Light - Coat Closet"
  description: "Controls the coat closet night light with smart behavior"
  trigger:
    - platform: state
      entity_id: binary_sensor.office_motion_sensor_occupancy
    - platform: state
      entity_id: sensor.night
    - platform: homeassistant
      event: start
  action:
    - service: script.smart_night_light
      data:
        motion_sensor: binary_sensor.office_motion_sensor_occupancy
        light_entity: light.coat_closet_hall
        illuminance_sensor: sensor.office_motion_sensor_illuminance_lux
        darkness_threshold: 200
        dim_brightness: 25
        bright_brightness: 150
        timeout: 120
  mode: restart

- id: smart_night_light_garage
  alias: "Smart Night Light - Garage"
  description: "Controls the garage lights with smart night light behavior"
  trigger:
    - platform: state
      entity_id: binary_sensor.garage_motion_backdoor_occupancy
    - platform: state
      entity_id: binary_sensor.back_door_contact
    - platform: state
      entity_id: sensor.night
    - platform: homeassistant
      event: start
  action:
    - service: script.smart_night_light
      data:
        motion_sensor: binary_sensor.garage_motion_backdoor_occupancy
        light_entity: light.garage_light_overhead
        illuminance_sensor: sensor.garage_motion_backdoor_illuminance_lux
        darkness_threshold: 25
        dim_brightness: 30
        bright_brightness: 255
        timeout: 180
  mode: restart

- id: smart_night_light_charlotte
  alias: "Smart Night Light - Charlotte Room"
  description: "Controls Charlotte's room night light with smart behavior"
  trigger:
    - platform: state
      entity_id: binary_sensor.charlotte_night_light_occupancy
    - platform: state
      entity_id: sensor.night
    - platform: homeassistant
      event: start
  action:
    - service: script.smart_night_light
      data:
        motion_sensor: binary_sensor.charlotte_night_light_occupancy
        light_entity: light.charlotte_night_light
        illuminance_sensor: sensor.charlotte_night_light_illuminance_lux
        darkness_threshold: 25
        dim_brightness: 15
        bright_brightness: 100
        timeout: 60
  mode: restart

- id: smart_night_light_owen
  alias: "Smart Night Light - Owen Room"
  description: "Controls Owen's room night light with smart behavior"
  trigger:
    - platform: state
      entity_id: binary_sensor.owen_night_light_occupancy
    - platform: state
      entity_id: sensor.night
    - platform: homeassistant
      event: start
  action:
    - service: script.smart_night_light
      data:
        motion_sensor: binary_sensor.owen_night_light_occupancy
        light_entity: light.owen_night_light
        illuminance_sensor: sensor.owen_night_light_illuminance_lux
        darkness_threshold: 25
        dim_brightness: 15
        bright_brightness: 100
        timeout: 60
  mode: restart

- id: smart_night_light_william
  alias: "Smart Night Light - William Room"
  description: "Controls William's room night light with smart behavior"
  trigger:
    - platform: state
      entity_id: binary_sensor.william_night_light_occupancy
    - platform: state
      entity_id: sensor.night
    - platform: homeassistant
      event: start
  action:
    - service: script.smart_night_light
      data:
        motion_sensor: binary_sensor.william_night_light_occupancy
        light_entity: light.william_night_light
        illuminance_sensor: sensor.william_night_light_illuminance_lux
        darkness_threshold: 25
        dim_brightness: 15
        bright_brightness: 100
        timeout: 60
  mode: restart

- id: 'wheres_maggie_alexa_alert'
  alias: 🐕 Where's Maggie Alexa Alert
  description: 'Triggered by Alexa routine to announce Maggie location based on recent motion'
  trigger:
  - platform: state
    entity_id: input_boolean.wheres_maggie_trigger
    to: 'on'
  condition: []
  action:
  - variables:
      most_recent_location: "{{ states('sensor.maggie_s_most_recent_location') }}"
      second_most_recent_location: "{{ states('sensor.maggie_s_second_most_recent_location') }}"
  - choose:
    - conditions:
      - condition: template
        value_template: "{{ most_recent_location == 'charlotte' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_charlotte
    - conditions:
      - condition: template
        value_template: "{{ most_recent_location == 'william' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_william
    - conditions:
      - condition: template
        value_template: "{{ most_recent_location == 'owen' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_owen
    - conditions:
      - condition: template
        value_template: "{{ most_recent_location == 'master_bathroom' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_master_bathroom
    - conditions:
      - condition: template
        value_template: "{{ most_recent_location == 'master_bedroom' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_master_bedroom
    - conditions:
      - condition: template
        value_template: "{{ most_recent_location == 'pantry' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_pantry
  - delay: '00:00:02'
  - choose:
    - conditions:
      - condition: template
        value_template: "{{ second_most_recent_location == 'charlotte' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_charlotte
    - conditions:
      - condition: template
        value_template: "{{ second_most_recent_location == 'william' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_william
    - conditions:
      - condition: template
        value_template: "{{ second_most_recent_location == 'owen' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_owen
    - conditions:
      - condition: template
        value_template: "{{ second_most_recent_location == 'master_bathroom' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_master_bathroom
    - conditions:
      - condition: template
        value_template: "{{ second_most_recent_location == 'master_bedroom' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_master_bedroom
    - conditions:
      - condition: template
        value_template: "{{ second_most_recent_location == 'pantry' }}"
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.maggie_location_pantry
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.wheres_maggie_trigger
  - delay: '00:00:05'
  - service: input_boolean.turn_off
    target:
      entity_id: 
        - input_boolean.maggie_location_charlotte
        - input_boolean.maggie_location_william
        - input_boolean.maggie_location_owen
        - input_boolean.maggie_location_master_bathroom
        - input_boolean.maggie_location_master_bedroom
        - input_boolean.maggie_location_pantry
  mode: single